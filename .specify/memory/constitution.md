<!--
Sync Impact Report:
- Version change: 1.1.0 → 1.2.0
- Modified principles:
  * I. uv-First Python Management → I. Terminal Excellence Foundation (expanded scope)
  * II. Static Site Generation Excellence → II. AI-Assisted Productivity (rewritten)
  * III. Local CI/CD First → III. Performance-First Architecture (enhanced)
  * IV. Component-Driven UI → IV. Team Collaboration Excellence (expanded)
  * V. Zero-Cost Deployment → V. Constitutional Preservation (enhanced)
  * VI. ROOT CAUSE ANALYSIS MANDATE (NEW CRITICAL PRINCIPLE)
- Added sections:
  * Advanced Terminal Productivity Success Criteria
  * Critical Mandates (Phase-based implementation)
  * Constitutional Violations (FORBIDDEN)
  * Error Handling Violations (CRITICAL)
  * Constitutional Error Handling Principles (VI. Root Cause Analysis Mandate)
  * Direct Problem Resolution Requirements
  * Forbidden Quick-Fix Patterns
  * Mandatory Resolution Process
  * Implementation Phases with dependencies
- Removed sections: None (all foundation preserved)
- Templates requiring updates:
  ✅ constitution.md (this file - updated to v1.1.0)
  ✅ plan-template.md (verified - supports advanced productivity features)
  ✅ tasks-template.md (verified - task categories support terminal/AI features)
  ✅ spec-template.md (verified - general purpose, no updates needed)
- Follow-up TODOs: None
- Foundation Status: PRESERVED ✅ (uv + Astro + GitHub Pages stack maintained)
-->

# Advanced Terminal Productivity Constitution

## Core Principles

### I. Terminal Excellence Foundation (NON-NEGOTIABLE)
ALL advanced productivity features SHALL enhance the proven terminal foundation without regression. Foundation preservation is mandatory: Oh My ZSH plugins and modern tools SHALL remain operational. Performance enhancement targets: Terminal startup SHALL achieve <50ms (vs current ~200ms). AI integration SHALL reduce lookup time by 30-50%. Theme excellence SHALL maintain instant rendering and rich information. Zero disruption: All enhancements SHALL be non-breaking additions to existing functionality.

### II. AI-Assisted Productivity Excellence (NON-NEGOTIABLE)
AI assistance SHALL be seamlessly integrated with local fallbacks and multi-provider support. Multi-Provider Support: OpenAI, Anthropic Claude, Google Gemini integration with failover. Context awareness: AI SHALL understand current directory, Git state, and command history. Local fallbacks: All AI features SHALL degrade gracefully when services unavailable. Privacy protection: No command history SHALL be transmitted without explicit consent. Performance mandate: AI suggestions SHALL appear within 500ms or fallback to local.

### III. Performance-First Architecture (NON-NEGOTIABLE)
Advanced features SHALL exceed performance targets while maintaining constitutional compliance. Startup performance: <50ms shell startup with intelligent caching and lazy loading. Memory efficiency: <150MB total memory footprint including all advanced features. Intelligent caching: Compilation and completion caching with performance monitoring. Lazy loading: Expensive tools deferred until needed with instant activation. Local CI/CD First: ALL workflows MUST be simulated locally before any push/sync operations.

### IV. Team Collaboration Excellence (NON-NEGOTIABLE)
Advanced features SHALL support team environments with configuration management and sharing. Configuration templates: Shared team standards with individual customization preservation. Environment sync: Consistent setups across development, staging, production environments. Secret management: Encrypted dotfile management with chezmoi integration. Documentation integration: Auto-generated setup guides and troubleshooting. Zero lock-in: All team features SHALL work with standard tools and processes.

### V. Constitutional Preservation (NON-NEGOTIABLE)
All advanced features SHALL maintain zero GitHub Actions consumption and constitutional compliance. Local-first development: All productivity tools execute locally with optional cloud integration. Branch preservation: Constitutional naming maintained (YYYYMMDD-HHMMSS-feat-description). User customization: Advanced features SHALL preserve existing user configurations. Performance monitoring: Constitutional targets continuously validated. Rollback capability: Instant rollback to foundation state if advanced features fail.

## Critical Advanced Productivity Mandates

### AI Integration Mandates (Phase 1)
1. **Multi-Provider Support**: MUST integrate OpenAI, Anthropic, and Google with unified interface
2. **Context Awareness**: MUST understand current directory, Git state, and command history
3. **Local Fallbacks**: MUST degrade gracefully when AI services unavailable
4. **Privacy Protection**: MUST obtain explicit consent before transmitting command history

### Advanced Theming Mandates (Phase 2)
1. **Performance Requirements**: MUST maintain instant rendering with rich information display
2. **Adaptive Intelligence**: MUST detect SSH, local, Docker environments and adapt accordingly
3. **Theme Compatibility**: MUST support both Powerlevel10k and Starship alternatives
4. **Startup Monitoring**: MUST track and optimize shell startup times continuously

### Performance Optimization Mandates (Phase 3)
1. **Startup Performance**: MUST achieve <50ms shell startup time through intelligent optimization
2. **Memory Efficiency**: MUST maintain <150MB total footprint including all advanced features
3. **Caching Intelligence**: MUST implement compilation and completion caching with monitoring
4. **Lazy Loading**: MUST defer expensive tool initialization until needed

### Team Collaboration Mandates (Phase 4)
1. **Configuration Management**: MUST integrate chezmoi for secure dotfile management
2. **Template System**: MUST support shared standards with individual customization
3. **Documentation Automation**: MUST generate setup guides and troubleshooting automatically
4. **Sync Capabilities**: MUST support consistent setups across multiple environments

### Foundation Preservation (MANDATORY)
- **uv-First Python**: ALL Python operations via uv exclusively (≥ 0.4.0)
- **Astro.build Excellence**: Static site generation with TypeScript strict mode (≥ 4.0) → builds to `docs/` for GitHub Pages
- **shadcn/ui + Tailwind**: Component-driven UI with accessibility compliance
- **GitHub Pages**: Zero-cost deployment with branch preservation strategy → served from `docs/` folder
- **Documentation Structure**: `docs/` = Astro.build output ONLY, `documentations/` = all other documentation

## Advanced Terminal Productivity Success Criteria

### Foundation Success (COMPLETED ✅)
- ✅ Oh My ZSH essential plugin trinity operational (zsh-autosuggestions, zsh-syntax-highlighting, you-should-use)
- ✅ Modern Unix tools suite with update-first philosophy (eza, bat, ripgrep, fzf, zoxide, fd)
- ✅ Intelligent installation logic with 44% performance improvement
- ✅ Constitutional compliance framework with 99.6% score
- ✅ uv + Astro + GitHub Pages stack foundation preserved

### AI Integration Success (Phase 1)
- ✅ Multi-provider AI integration (OpenAI, Anthropic, Google) with unified interface
- ✅ Natural language to command translation reducing lookup time by 30-50%
- ✅ Context awareness understanding directory, Git state, and command history
- ✅ Local fallbacks ensuring functionality without external dependencies

### Advanced Theming Success (Phase 2)
- ✅ Powerlevel10k or Starship deployment with instant rendering
- ✅ Adaptive theme switching based on environment detection
- ✅ Startup time optimization achieving <50ms target
- ✅ Rich information display maintaining performance

### Performance Optimization Success (Phase 3)
- ✅ Shell startup time reduced to <50ms through intelligent caching
- ✅ Memory footprint optimized to <150MB including all features
- ✅ Lazy loading implemented for expensive tool initialization
- ✅ Continuous performance monitoring and alerting operational

### Team Collaboration Success (Phase 4)
- ✅ Configuration management via chezmoi with secure dotfile handling
- ✅ Template system supporting shared standards with individual customization
- ✅ Auto-generated documentation and troubleshooting guides
- ✅ Multi-environment sync capabilities (development, staging, production)

### Constitutional Preservation Standards (MANDATORY)
- Zero GitHub Actions consumption maintained throughout all phases
- Branch preservation with timestamped naming (YYYYMMDD-HHMMSS-feat-description)
- Local CI/CD validation before any deployment
- Performance targets: <50ms startup, <150MB memory, 30-50% productivity improvement

## Constitutional Violations (FORBIDDEN)

### Terminal Excellence Violations
- ❌ **Foundation Regression**: Breaking existing Oh My ZSH plugins or modern tools
- ❌ **Performance Degradation**: Startup time exceeding 50ms or memory exceeding 150MB
- ❌ **User Disruption**: Advanced features disrupting existing terminal workflows
- ❌ **Configuration Loss**: Losing user customizations during feature implementation

### AI Integration Violations
- ❌ **Privacy Breach**: Transmitting command history without explicit user consent
- ❌ **Single Provider Lock-in**: Dependency on single AI provider without fallbacks
- ❌ **Performance Impact**: AI features causing startup delays exceeding 500ms
- ❌ **Context Leakage**: Exposing sensitive directory or Git information inappropriately

### Performance Architecture Violations
- ❌ **Memory Bloat**: Total memory footprint exceeding 150MB including all features
- ❌ **Startup Regression**: Shell startup time exceeding 50ms target
- ❌ **Caching Failures**: Intelligent caching not reducing completion times
- ❌ **Resource Waste**: Unnecessary background processes or excessive CPU usage

### Team Collaboration Violations
- ❌ **Vendor Lock-in**: Team features requiring proprietary tools or services
- ❌ **Security Weaknesses**: Insecure handling of team configurations or secrets
- ❌ **Documentation Gaps**: Missing or outdated auto-generated documentation
- ❌ **Environment Inconsistencies**: Different behavior across development environments

### Constitutional Preservation Violations
- ❌ **GitHub Actions Usage**: ANY consumption beyond baseline for advanced features
- ❌ **Branch Deletion**: Deleting implementation branches without explicit approval
- ❌ **Compliance Regression**: Reducing overall constitutional compliance score
- ❌ **Local Validation Bypass**: Deploying advanced features without local validation

### Error Handling Violations (CRITICAL)
- ❌ **Workaround Solutions**: Creating scripts or bypasses instead of fixing root causes
- ❌ **Error Masking**: Suppressing errors without understanding underlying problems
- ❌ **Quick Fixes**: Band-aid solutions that don't address fundamental issues
- ❌ **Symptom Treatment**: Addressing surface problems while ignoring core defects

## VI. Root Cause Analysis Mandate (CRITICAL)

**RULE**: Fix root causes directly. NO workarounds, bypasses, or quick fixes.

**FORBIDDEN**:
- `@ts-ignore`, `--no-check`, error suppression
- Creating scripts to bypass broken functionality
- Tool switching instead of fixing configuration
- Any solution that masks the underlying problem

**REQUIRED PROCESS**:
1. Identify the actual root cause
2. Fix the root cause directly
3. Validate the fix works
4. Document the solution

**EXAMPLES**:
- TypeScript errors → Fix type declarations, NOT disable checking
- Build failures → Fix configuration, NOT create alternative build
- 250+ TypeScript errors → Fix each error properly, NOT bypass with `--no-check`

## Implementation Phases

### Phase 1: AI Integration Foundation (READY FOR IMPLEMENTATION)
**Target**: Multi-provider AI assistance with local fallbacks and context awareness
**Foundation**: ✅ Terminal infrastructure, Oh My ZSH plugins, modern tools operational
**Constitutional Requirements**: Zero GitHub Actions, <500ms AI response, privacy protection

### Phase 2: Advanced Theming Excellence (DEPENDENT ON PHASE 1)
**Target**: Powerlevel10k/Starship with adaptive environment detection
**Foundation**: ✅ Performance optimization framework, theme management system ready
**Constitutional Requirements**: Instant rendering, <50ms startup impact, environment adaptation

### Phase 3: Performance Optimization Mastery (DEPENDENT ON PHASES 1-2)
**Target**: <50ms startup, intelligent caching, lazy loading implementation
**Foundation**: ✅ Baseline performance metrics, monitoring infrastructure ready
**Constitutional Requirements**: <150MB memory, continuous monitoring, intelligent optimization

### Phase 4: Team Collaboration Excellence (DEPENDENT ON PHASES 1-3)
**Target**: Configuration management, templates, documentation automation
**Foundation**: ✅ Individual productivity features proven, ready for team scaling
**Constitutional Requirements**: Zero vendor lock-in, secure handling, environment consistency

## Governance

### Amendment Process
Constitution amendments require documentation of changes, approval rationale, and migration plan for existing implementations. All changes must maintain backward compatibility with existing local CI/CD infrastructure and branch preservation policies. Advanced terminal productivity features must preserve the foundation stack (uv + Astro + GitHub Pages).

### Compliance Verification
All pull requests and reviews must verify compliance with these principles. Local CI/CD execution logs must be reviewed for zero GitHub Actions consumption. Performance metrics must meet specified targets before deployment approval. Foundation preservation validation required for all advanced features.

### Implementation Reference
For detailed implementation guidance, refer to `spec-kit/SPEC_KIT_INDEX.md` and `spec-kit/002/1-spec-kit-constitution.md` which contain the complete constitution prompts and execution instructions for establishing advanced terminal productivity principles in practice.

### Version Control
This constitution follows semantic versioning: MAJOR for breaking changes to core principles, MINOR for new principles or significant expansions, PATCH for clarifications and refinements.

**Version**: 1.2.0 | **Ratified**: 2025-01-20 | **Last Amended**: 2025-09-21