# Contributing to Ghostty Configuration Files

Thank you for your interest in contributing! This guide will help you understand the project structure and contribution workflow.

## Documentation Structure

This repository has a specific documentation organization that is CRITICAL to understand before making contributions:

### Two Separate Documentation Locations

1. **`documentation/` - Source Documentation (EDIT THESE)**
   - **Purpose**: Technical documentation, architecture, setup guides, specifications
   - **Format**: Markdown files (git-tracked)
   - **When to use**: Adding technical docs, architecture diagrams, developer guides
   - **Examples**:
     - `documentation/architecture/` - System architecture and design
     - `documentation/setup/` - Installation and setup guides (MCP, new-device)
     - `documentation/developer/` - Developer handoff summaries, conversation logs
     - `documentation/specifications/` - Feature specifications
     - `documentation/archive/` - Historical/obsolete documentation

2. **`astro-website/src/` - Website Content Source (EDIT THESE)**
   - **Purpose**: User-facing documentation website content
   - **Format**: Markdown files processed by Astro.build
   - **When to use**: Adding user guides, AI guidelines, developer tutorials
   - **Examples**:
     - `astro-website/src/user-guide/` - Installation, configuration, usage guides
     - `astro-website/src/ai-guidelines/` - AI assistant guidelines
     - `astro-website/src/developer/` - Contributing, architecture, testing guides

3. **`docs/` - Build Output (DO NOT EDIT DIRECTLY)**
   - **Purpose**: Static HTML generated by Astro for GitHub Pages deployment
   - **Format**: HTML, CSS, JavaScript (auto-generated)
   - **Critical**: Contains `.nojekyll` file (REQUIRED for GitHub Pages)
   - **WARNING**: Never manually edit files here - changes will be overwritten
   - **To update**: Edit files in `astro-website/src/` and run `npm run build`

### Quick Decision Guide

**Where should I add my documentation?**

| Documentation Type | Location | Build Command |
|-------------------|----------|---------------|
| Architecture docs | `documentation/architecture/` | N/A (direct commit) |
| Setup/installation guides | `documentation/setup/` | N/A (direct commit) |
| Developer handoffs | `documentation/developer/` | N/A (direct commit) |
| User-facing guides | `astro-website/src/user-guide/` | `npm run build` |
| AI assistant guidelines | `astro-website/src/ai-guidelines/` | `npm run build` |
| Developer tutorials | `astro-website/src/developer/` | `npm run build` |

### Building the Website

When you edit files in `astro-website/src/`:

```bash
cd astro-website
npm run build
# Output goes to ../docs/ (auto-committed for GitHub Pages)
```

## Project Structure

```
/home/kkk/Apps/ghostty-config-files/
â”œâ”€â”€ start.sh                    # Installation entry point
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ manage.sh               # Management interface
â”œâ”€â”€ configs/                    # Configuration files (Ghostty, themes, dircolors)
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ tasks/                  # Modular installation scripts (refactoring to installers/ planned)
â”œâ”€â”€ documentation/              # Technical documentation (markdown source)
â”‚   â”œâ”€â”€ architecture/
â”‚   â”œâ”€â”€ setup/
â”‚   â”œâ”€â”€ developer/
â”‚   â””â”€â”€ specifications/
â”œâ”€â”€ astro-website/              # Astro website source
â”‚   â”œâ”€â”€ src/                    # Markdown content for website
â”‚   â””â”€â”€ astro.config.mjs        # Build config (outDir: '../docs')
â”œâ”€â”€ docs/                       # Astro build output (GitHub Pages)
â”‚   â””â”€â”€ .nojekyll               # CRITICAL - never remove
â””â”€â”€ .runners-local/             # Local CI/CD infrastructure
```

## Git Workflow (MANDATORY)

This repository follows a **constitutional branch preservation strategy**:

### Branch Naming Convention

**Format**: `YYYYMMDD-HHMMSS-type-short-description`

**Examples**:
- `20251121-193200-refactor-move-manage-sh`
- `20251121-140000-feat-context-menu-integration`
- `20251121-160000-docs-add-contributing`
- `20251121-180000-fix-performance-optimization`

### Workflow Steps

```bash
# 1. Create timestamped branch
DATETIME=$(date +"%Y%m%d-%H%M%S")
BRANCH_NAME="${DATETIME}-feat-your-feature"
git checkout -b "$BRANCH_NAME"

# 2. Make your changes
# ... edit files ...

# 3. Commit with constitutional format
git add .
git commit -m "feat: Add your feature

CHANGES:
- Change 1
- Change 2

RATIONALE:
- Why this change is needed

VERIFICATION:
- How you tested it

ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"

# 4. Push branch
git push -u origin "$BRANCH_NAME"

# 5. Merge to main (preserving branch)
git checkout main
git merge "$BRANCH_NAME" --no-ff
git push origin main

# 6. IMPORTANT: Branch is preserved (never deleted)
# This maintains complete configuration history
```

### Branch Preservation Policy

**CRITICAL**: This repository NEVER deletes branches. Every branch represents valuable configuration history and must be preserved.

**Why?**
- Complete audit trail of all changes
- Easy rollback to any previous configuration
- Historical context for decision-making

## Development Commands

### Testing Your Changes

```bash
# Validate Ghostty configuration
ghostty +show-config

# Test manage.sh commands
./scripts/manage.sh --help
./scripts/manage.sh validate

# Test installation (dry-run)
./start.sh --help

# Build and test website
cd astro-website
npm run build
npm run dev  # Local server: http://localhost:4321/ghostty-config-files/
```

### Local CI/CD

Before submitting changes, run local CI/CD validation:

```bash
# Complete local workflow
./.runners-local/workflows/gh-workflow-local.sh all

# Individual validations
./.runners-local/workflows/gh-workflow-local.sh validate
./.runners-local/workflows/gh-workflow-local.sh test
```

## Contribution Guidelines

### Code Style

- **Shell Scripts**: Use `shellcheck` for validation
- **Markdown**: Follow consistent formatting (2-space indents)
- **Commit Messages**: Use conventional commits (feat, fix, docs, refactor, test)

### Before Submitting

1. Test your changes locally
2. Update relevant documentation
3. Follow the git workflow above
4. Run local CI/CD validation
5. Ensure branch follows naming convention

### What to Contribute

We welcome contributions for:
- Bug fixes
- Performance improvements
- Documentation improvements
- New features (discuss first in an issue)
- Configuration optimizations
- CI/CD enhancements

### What NOT to Contribute

Please avoid:
- Breaking changes without discussion
- Removing `.nojekyll` file (critical for GitHub Pages)
- Deleting branches (constitutional violation)
- Manual edits to `docs/` directory (auto-generated)
- Commits with secrets (API keys, passwords)

## Getting Help

- **Issues**: Open an issue for bugs or feature requests
- **Discussions**: Use GitHub Discussions for questions
- **Documentation**: Check `documentation/` and the website
- **Contact**: See repository maintainers

## AI Assistant Guidelines

If you're an AI assistant working on this repository:

1. **Read AGENTS.md**: Contains mandatory requirements for AI assistants
2. **Follow Constitutional Rules**: Branch preservation, git workflow, local CI/CD
3. **Query Context7**: Use Context7 MCP for latest best practices
4. **Save Conversation Logs**: Store in `documentation/developer/conversation_logs/`

## License

This project is licensed under the MIT License. See [LICENSE](../LICENSE) file for details.

---

**Thank you for contributing!**

Questions? Open an issue or check the documentation in `documentation/` and `astro-website/src/`.
