<!DOCTYPE html><html lang="en" data-theme="light" class="transition-colors duration-200"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/ghostty-config-files/favicon.svg"><meta name="generator" content="Astro v5.16.0"><title>manager-runner.sh Usage Guide | Ghostty Configuration Files</title><meta name="description" content="**Author**: Claude Code (Sonnet 4.5)"><!-- OpenGraph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://kairin.github.io/ghostty-config-files/"><meta property="og:title" content="manager-runner.sh Usage Guide | Ghostty Configuration Files"><meta property="og:description" content="**Author**: Claude Code (Sonnet 4.5)"><meta property="og:image" content="https://kairin.github.io/ghostty-config-files/images/og-preview.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:site_name" content="Ghostty Configuration Files"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://kairin.github.io/ghostty-config-files/"><meta name="twitter:title" content="manager-runner.sh Usage Guide | Ghostty Configuration Files"><meta name="twitter:description" content="**Author**: Claude Code (Sonnet 4.5)"><meta name="twitter:image" content="https://kairin.github.io/ghostty-config-files/images/og-preview.png"><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/ghostty-config-files/_astro/_slug_.D-a0e8m2.css"></head> <body class="min-h-screen bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 transition-colors duration-200 cyber-bg"> <!-- Modern Glass Morphism Navigation --> <nav id="main-nav" class="fixed top-0 w-full bg-[#fdfbf7] dark:bg-slate-900/80 shadow-lg border-b border-gray-200/50 dark:border-gray-700/50 z-50 transition-all duration-300"> <div class="full-width-section"> <div class="navbar justify-start gap-4"> <div class="flex-none"> <a id="nav-logo" href="/ghostty-config-files/" class="btn btn-ghost text-xl font-bold hover:text-blue-600 dark:hover:text-cyan-400 transition-all"> <span class="hidden md:inline">ğŸ‘» Ghostty Config Files</span> <span class="md:hidden">ğŸ‘» Ghostty</span> </a> </div> <div class="flex-none gap-2 flex items-center"> <ul class="menu menu-horizontal px-1 flex gap-4 items-center hidden lg:flex"> <li><a href="/ghostty-config-files/user-guide/installation" class="nav-link font-bold text-blue-600 dark:text-cyan-400">Get Started</a></li> <li><a href="/ghostty-config-files/user-guide" class="nav-link">User Guide</a></li> <li><a href="/ghostty-config-files/ai-guidelines" class="nav-link">AI Guidelines</a></li> <li><a href="/ghostty-config-files/developer" class="nav-link">Developer</a></li> <li> <a href="https://github.com/kairin/ghostty-config-files" target="_blank" rel="noopener noreferrer" class="nav-link">
GitHub
</a> </li> </ul> <button id="theme-toggle" class="btn btn-ghost btn-circle" aria-label="Toggle theme" title="Toggle dark/light mode" data-astro-cid-x3pjskd3> <svg id="theme-icon-sun" class="h-6 w-6 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-x3pjskd3> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" data-astro-cid-x3pjskd3></path> </svg> <svg id="theme-icon-moon" class="h-6 w-6 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-x3pjskd3> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" data-astro-cid-x3pjskd3></path> </svg> </button> <script type="module">function c(){const e=document.documentElement,t=document.getElementById("theme-icon-sun"),n=document.getElementById("theme-icon-moon"),d=localStorage.getItem("theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches,o=d||(s?"dark":"light");o==="dark"?(e.setAttribute("data-theme","dark"),e.classList.add("dark"),t&&t.classList.remove("hidden"),n&&n.classList.add("hidden")):(e.setAttribute("data-theme","light"),e.classList.remove("dark"),t&&t.classList.add("hidden"),n&&n.classList.remove("hidden")),localStorage.setItem("theme",o)}function a(){const e=document.documentElement,t=document.getElementById("theme-icon-sun"),n=document.getElementById("theme-icon-moon"),s=e.getAttribute("data-theme")==="dark"?"light":"dark";e.setAttribute("data-theme",s),s==="dark"?(e.classList.add("dark"),t&&t.classList.remove("hidden"),n&&n.classList.add("hidden")):(e.classList.remove("dark"),t&&t.classList.add("hidden"),n&&n.classList.remove("hidden")),localStorage.setItem("theme",s)}c();const m=document.getElementById("theme-toggle");m&&m.addEventListener("click",a);document.addEventListener("astro:page-load",c);</script>  </div> </div> </div> </nav> <!-- Spacer for fixed nav --> <div class="h-20"></div> <!-- Main Content - Full Width --> <main class="w-full px-4 md:px-8 lg:px-12 xl:px-16 py-12"> <!-- Article Header (if metadata provided) --> <div class="mb-8 text-sm text-gray-600 dark:text-gray-400"> <time datetime="2025-11-25T00:00:00.000Z"> November 25, 2025 </time> <span> by Ghostty Config Team</span> </div> <!-- Page Content - Full Width with Max Readable for Prose --> <article class="prose prose-lg w-full max-w-none text-lg leading-relaxed">  <div class="breadcrumbs text-sm mb-6"> <ul> <li><a href="/ghostty-config-files/">Home</a></li> <li><a href="/ghostty-config-files/developer/architecture">Developer</a></li> <li>manager-runner.sh Usage Guide</li> </ul> </div> <h1>manager-runner.sh Usage Guide</h1> <p class="text-xl text-base-content/70 mb-8">**Author**: Claude Code (Sonnet 4.5)</p><h1 id="manager-runnersh-usage-guide">manager-runner.sh Usage Guide</h1>
<p><strong>Author</strong>: Claude Code (Sonnet 4.5)
<strong>Date</strong>: 2025-11-21
<strong>Purpose</strong>: Complete guide to using the reusable TUI wrapper for component installation managers</p>
<hr>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#overview">Overview</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#step-format">Step Format</a></li>
<li><a href="#api-reference">API Reference</a></li>
<li><a href="#usage-examples">Usage Examples</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#advanced-topics">Advanced Topics</a></li>
</ol>
<hr>
<h2 id="overview">Overview</h2>
<h3 id="what-is-manager-runnersh">What is manager-runner.sh?</h3>
<p><code>manager-runner.sh</code> is a <strong>reusable TUI (Terminal User Interface) wrapper</strong> that provides Docker-like installation experience for all component managers in the ghostty-config-files repository.</p>
<p><strong>Key Innovation</strong>: Component managers define installation steps as <strong>DATA</strong> (not code), then delegate all TUI orchestration to <code>manager-runner.sh</code>.</p>
<h3 id="benefits">Benefits</h3>
<p>âœ… <strong>Zero Code Duplication</strong> - All TUI logic in one place
âœ… <strong>Consistent UX</strong> - All installers look identical
âœ… <strong>Easy Maintenance</strong> - Change TUI behavior in one file
âœ… <strong>Data-Driven</strong> - Component managers are pure configuration
âœ… <strong>Professional Styling</strong> - Docker-like collapsible output with gum styling
âœ… <strong>Error Handling</strong> - Automatic error detection and display
âœ… <strong>Progress Tracking</strong> - Real-time step counters and duration display</p>
<h3 id="visual-experience">Visual Experience</h3>
<p><strong>Component Header</strong> (gum-styled):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span></span>
<span class="line"><span>â•‘              Installing Ghostty Terminal                  â•‘</span></span>
<span class="line"><span>â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span></span></code></pre>
<p><strong>Task Execution</strong> (Collapsible with spinners):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>âœ“ Check Prerequisites (5s)</span></span>
<span class="line"><span>â ‹ Downloading Zig Compiler... (30s estimated)</span></span>
<span class="line"><span>âœ“ Downloaded Zig Compiler (32s)</span></span>
<span class="line"><span>â ‹ Extracting Zig Tarball...</span></span>
<span class="line"><span>âœ“ Extracted Zig Tarball (12s)</span></span>
<span class="line"><span>...</span></span></code></pre>
<p><strong>Component Footer</strong> (Summary):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span></span>
<span class="line"><span>âœ… Ghostty Terminal installation SUCCESS (9/9 steps, 185s total)</span></span>
<span class="line"><span>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span></span></code></pre>
<hr>
<h2 id="quick-start">Quick Start</h2>
<h3 id="creating-a-new-component-manager">Creating a New Component Manager</h3>
<p><strong>Step 1</strong>: Create directory structure</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">mkdir</span><span style="color:#79B8FF"> -p</span><span style="color:#9ECBFF"> lib/installers/my_component/steps</span></span></code></pre>
<p><strong>Step 2</strong>: Create <code>lib/installers/my_component/steps/common.sh</code></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#6A737D"># Source repository root detection</span></span>
<span class="line"><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"$(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> "$(</span><span style="color:#B392F0">dirname</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">BASH_SOURCE</span><span style="color:#9ECBFF">[0]}")/../../../" &#x26;&#x26; </span><span style="color:#79B8FF">pwd</span><span style="color:#9ECBFF">)"</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#E1E4E8"> REPO_ROOT</span></span></code></pre>
<p><strong>Step 3</strong>: Create <code>lib/installers/my_component/install.sh</code></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#6A737D">#</span></span>
<span class="line"><span style="color:#6A737D"># My Component Installation Manager</span></span>
<span class="line"><span style="color:#6A737D"># Purpose: Orchestrates installation of My Component</span></span>
<span class="line"><span style="color:#6A737D"># Dependencies: (list dependencies here)</span></span>
<span class="line"><span style="color:#6A737D"># Exit Codes: 0=success, 1=failure</span></span>
<span class="line"><span style="color:#6A737D">#</span></span>
<span class="line"><span style="color:#6A737D"># Architecture: Data-driven with modular TUI integration via manager-runner.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -euo</span><span style="color:#9ECBFF"> pipefail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Get script directory and repository root</span></span>
<span class="line"><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"$(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> "$(</span><span style="color:#B392F0">dirname</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">BASH_SOURCE</span><span style="color:#9ECBFF">[0]}")" &#x26;&#x26; </span><span style="color:#79B8FF">pwd</span><span style="color:#9ECBFF">)"</span></span>
<span class="line"><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"${</span><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#9ECBFF">}/steps"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Source common functions and modular TUI wrapper</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#9ECBFF">}/common.sh"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/installers/common/manager-runner.sh"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Main installation orchestrator</span></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">    # Define installation steps as data (not loops)</span></span>
<span class="line"><span style="color:#6A737D">    # Format: "script.sh|Display Name|Estimated Duration (seconds)"</span></span>
<span class="line"><span style="color:#F97583">    declare</span><span style="color:#79B8FF"> -a</span><span style="color:#E1E4E8"> INSTALL_STEPS</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">        "00-check-prerequisites.sh|Check Prerequisites|5"</span></span>
<span class="line"><span style="color:#9ECBFF">        "01-download-package.sh|Download Package|30"</span></span>
<span class="line"><span style="color:#9ECBFF">        "02-install-package.sh|Install Package|10"</span></span>
<span class="line"><span style="color:#9ECBFF">        "03-configure.sh|Configure Component|10"</span></span>
<span class="line"><span style="color:#9ECBFF">        "04-verify.sh|Verify Installation|5"</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # One function call runs everything with full TUI integration</span></span>
<span class="line"><span style="color:#B392F0">    run_install_steps</span><span style="color:#9ECBFF"> "My Component"</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$STEPS_DIR</span><span style="color:#9ECBFF">"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Execute main function</span></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">$@</span><span style="color:#9ECBFF">"</span></span></code></pre>
<p><strong>Step 4</strong>: Create individual step scripts</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Example: lib/installers/my_component/steps/00-check-prerequisites.sh</span></span>
<span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -euo</span><span style="color:#9ECBFF"> pipefail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"$(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> "$(</span><span style="color:#B392F0">dirname</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">BASH_SOURCE</span><span style="color:#9ECBFF">[0]}")" &#x26;&#x26; </span><span style="color:#79B8FF">pwd</span><span style="color:#9ECBFF">)"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#9ECBFF">}/common.sh"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/core/logging.sh"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#B392F0">    log</span><span style="color:#9ECBFF"> "INFO"</span><span style="color:#9ECBFF"> "Checking prerequisites for My Component..."</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Check if required command exists</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#F97583"> !</span><span style="color:#79B8FF"> command</span><span style="color:#79B8FF"> -v</span><span style="color:#9ECBFF"> some_command</span><span style="color:#E1E4E8"> &#x26;</span><span style="color:#F97583">></span><span style="color:#E1E4E8">/dev/null; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#B392F0">        log</span><span style="color:#9ECBFF"> "ERROR"</span><span style="color:#9ECBFF"> "some_command is not installed"</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    log</span><span style="color:#9ECBFF"> "SUCCESS"</span><span style="color:#9ECBFF"> "All prerequisites satisfied"</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">$@</span><span style="color:#9ECBFF">"</span></span></code></pre>
<p><strong>Step 5</strong>: Make scripts executable</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">chmod</span><span style="color:#9ECBFF"> +x</span><span style="color:#9ECBFF"> lib/installers/my_component/install.sh</span></span>
<span class="line"><span style="color:#B392F0">chmod</span><span style="color:#9ECBFF"> +x</span><span style="color:#9ECBFF"> lib/installers/my_component/steps/</span><span style="color:#79B8FF">*</span><span style="color:#9ECBFF">.sh</span></span></code></pre>
<p><strong>Step 6</strong>: Test your installer</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">./lib/installers/my_component/install.sh</span></span></code></pre>
<p><strong>Thatâ€™s it!</strong> - Your installer now has full TUI integration with Docker-like collapsible output, gum styling, spinners, error handling, and progress tracking.</p>
<hr>
<h2 id="architecture">Architecture</h2>
<h3 id="flow-diagram">Flow Diagram</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>Component Manager (install.sh)</span></span>
<span class="line"><span>    â”‚</span></span>
<span class="line"><span>    â”œâ”€ Source manager-runner.sh</span></span>
<span class="line"><span>    â”œâ”€ Define INSTALL_STEPS array (data)</span></span>
<span class="line"><span>    â””â”€ Call run_install_steps()</span></span>
<span class="line"><span>         â”‚</span></span>
<span class="line"><span>         â”œâ”€ Validate step format</span></span>
<span class="line"><span>         â”œâ”€ Initialize TUI system</span></span>
<span class="line"><span>         â”œâ”€ Show component header (gum-styled)</span></span>
<span class="line"><span>         â”‚</span></span>
<span class="line"><span>         â””â”€ For each step:</span></span>
<span class="line"><span>              â”œâ”€ Register task</span></span>
<span class="line"><span>              â”œâ”€ Start task (show spinner)</span></span>
<span class="line"><span>              â”œâ”€ Execute step script</span></span>
<span class="line"><span>              â”œâ”€ Complete task (show âœ“) OR Fail task (show âœ—)</span></span>
<span class="line"><span>              â””â”€ Update progress</span></span>
<span class="line"><span>         â”‚</span></span>
<span class="line"><span>         â””â”€ Show component footer (summary)</span></span></code></pre>
<h3 id="data-driven-architecture">Data-Driven Architecture</h3>
<p><strong>Before</strong> (Hard-Coded Loop):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> step </span><span style="color:#F97583">in</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">steps</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#B392F0">    log</span><span style="color:#9ECBFF"> "INFO"</span><span style="color:#9ECBFF"> "Step ${</span><span style="color:#E1E4E8">step_num</span><span style="color:#9ECBFF">}/9: ${</span><span style="color:#E1E4E8">step</span><span style="color:#F97583">%</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">sh</span><span style="color:#9ECBFF">}"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#F97583"> !</span><span style="color:#B392F0"> "${</span><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#B392F0">}/${</span><span style="color:#E1E4E8">step</span><span style="color:#B392F0">}"</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#B392F0">        log</span><span style="color:#9ECBFF"> "ERROR"</span><span style="color:#9ECBFF"> "Installation failed at step ${</span><span style="color:#E1E4E8">step_num</span><span style="color:#9ECBFF">}: ${</span><span style="color:#E1E4E8">step</span><span style="color:#9ECBFF">}"</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    ((step_num</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#F97583">done</span></span></code></pre>
<p><strong>After</strong> (Data-Driven with manager-runner.sh):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#F97583">declare</span><span style="color:#79B8FF"> -a</span><span style="color:#E1E4E8"> INSTALL_STEPS</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">    "00-check.sh|Check Prerequisites|5"</span></span>
<span class="line"><span style="color:#9ECBFF">    "01-download.sh|Download Package|30"</span></span>
<span class="line"><span style="color:#9ECBFF">    "02-install.sh|Install Package|10"</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">run_install_steps</span><span style="color:#9ECBFF"> "ComponentName"</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$STEPS_DIR</span><span style="color:#9ECBFF">"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span></span></code></pre>
<p><strong>Benefits</strong>:</p>
<ul>
<li>40 lines of loop code eliminated</li>
<li>All TUI logic centralized in manager-runner.sh</li>
<li>Component manager is pure configuration (data, not code)</li>
</ul>
<hr>
<h2 id="step-format">Step Format</h2>
<h3 id="anatomy-of-a-step-definition">Anatomy of a Step Definition</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">"SCRIPT|DISPLAY_NAME|DURATION"</span></span></code></pre>
<p><strong>Fields</strong> (pipe-delimited):</p>
<ol>
<li><strong>SCRIPT</strong>: Filename of the step script (e.g., <code>00-check-prerequisites.sh</code>)</li>
<li><strong>DISPLAY_NAME</strong>: Human-readable task name (e.g., <code>Check Prerequisites</code>)</li>
<li><strong>DURATION</strong>: Estimated duration in seconds (e.g., <code>5</code>)</li>
</ol>
<h3 id="examples">Examples</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Simple prerequisite check</span></span>
<span class="line"><span style="color:#B392F0">"00-check-prerequisites.sh|Check Prerequisites|5"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Download operation</span></span>
<span class="line"><span style="color:#B392F0">"01-download-zig.sh|Download Zig Compiler|30"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Long-running build</span></span>
<span class="line"><span style="color:#B392F0">"04-build-ghostty.sh|Build Ghostty|90"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Configuration step</span></span>
<span class="line"><span style="color:#B392F0">"06-configure-ghostty.sh|Configure Ghostty|10"</span></span></code></pre>
<h3 id="field-guidelines">Field Guidelines</h3>
<h4 id="script-field">SCRIPT Field</h4>
<ul>
<li>Must be a valid filename in the <code>steps/</code> directory</li>
<li>Recommended naming: <code>##-action-target.sh</code> (e.g., <code>00-check-prerequisites.sh</code>)</li>
<li>Must be executable (<code>chmod +x</code>)</li>
<li>Must use <code>set -euo pipefail</code> for proper error handling</li>
</ul>
<h4 id="display_name-field">DISPLAY_NAME Field</h4>
<ul>
<li>Short, descriptive, user-friendly</li>
<li>Use title case (e.g., â€œInstall Node.jsâ€)</li>
<li>Avoid technical jargon if possible</li>
<li>Max recommended length: 50 characters</li>
</ul>
<h4 id="duration-field">DURATION Field</h4>
<ul>
<li>Estimated time in seconds</li>
<li>Used for progress tracking and user expectations</li>
<li>Round to nearest 5 seconds for simplicity</li>
<li>Examples:
<ul>
<li>Quick checks: 5s</li>
<li>Downloads: 20-30s</li>
<li>Builds: 60-120s</li>
<li>Installations: 10-15s</li>
</ul>
</li>
</ul>
<h3 id="validation">Validation</h3>
<p>manager-runner.sh automatically validates:</p>
<ul>
<li>âœ“ Exactly 3 pipe-delimited fields</li>
<li>âœ“ No empty fields</li>
<li>âœ“ Duration is a positive integer</li>
<li>âœ“ Script file exists and is executable</li>
</ul>
<p><strong>Example Error</strong> (invalid format):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>[ERROR] Invalid step format: '00-check.sh|Check Prerequisites' (expected: 'script|name|duration')</span></span></code></pre>
<hr>
<h2 id="api-reference">API Reference</h2>
<h3 id="main-function">Main Function</h3>
<h4 id="run_install_steps"><code>run_install_steps()</code></h4>
<p><strong>Purpose</strong>: Execute installation steps with full TUI integration</p>
<p><strong>Signature</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">run_install_steps</span><span style="color:#9ECBFF"> COMPONENT_NAME</span><span style="color:#9ECBFF"> STEPS_DIR</span><span style="color:#9ECBFF"> INSTALL_STEPS[@]</span></span></code></pre>
<p><strong>Parameters</strong>:</p>
<ol>
<li><code>COMPONENT_NAME</code> - Display name (e.g., â€œGhostty Terminalâ€, â€œZSH Shellâ€)</li>
<li><code>STEPS_DIR</code> - Absolute path to steps directory</li>
<li><code>INSTALL_STEPS[@]</code> - Array of step definitions (format: â€œscript|name|durationâ€)</li>
</ol>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>0</code> - All steps completed successfully</li>
<li><code>1</code> - One or more steps failed</li>
<li><code>2</code> - Configuration error (invalid step format)</li>
</ul>
<p><strong>Example</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#F97583">declare</span><span style="color:#79B8FF"> -a</span><span style="color:#E1E4E8"> INSTALL_STEPS</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">    "00-check.sh|Check Prerequisites|5"</span></span>
<span class="line"><span style="color:#9ECBFF">    "01-install.sh|Install Package|30"</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">run_install_steps</span><span style="color:#9ECBFF"> "My Component"</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$STEPS_DIR</span><span style="color:#9ECBFF">"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span></span></code></pre>
<h3 id="helper-functions">Helper Functions</h3>
<h4 id="show_component_header"><code>show_component_header()</code></h4>
<p><strong>Purpose</strong>: Display styled header for component installation</p>
<p><strong>Signature</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">show_component_header</span><span style="color:#9ECBFF"> COMPONENT_NAME</span></span></code></pre>
<p><strong>Output</strong> (gum-styled):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span></span>
<span class="line"><span>â•‘              Installing My Component                      â•‘</span></span>
<span class="line"><span>â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span></span></code></pre>
<h4 id="show_component_footer"><code>show_component_footer()</code></h4>
<p><strong>Purpose</strong>: Display summary footer after installation</p>
<p><strong>Signature</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">show_component_footer</span><span style="color:#9ECBFF"> COMPONENT_NAME</span><span style="color:#9ECBFF"> TOTAL_STEPS</span><span style="color:#9ECBFF"> STATUS</span></span></code></pre>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>STATUS</code> - One of: <code>SUCCESS</code>, <code>FAILED</code>, <code>PARTIAL</code></li>
</ul>
<p><strong>Output</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span></span>
<span class="line"><span>âœ… My Component installation SUCCESS (5/5 steps, 60s total)</span></span>
<span class="line"><span>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span></span></code></pre>
<h4 id="validate_step_format"><code>validate_step_format()</code></h4>
<p><strong>Purpose</strong>: Validate step definition format</p>
<p><strong>Signature</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">validate_step_format</span><span style="color:#9ECBFF"> STEP_INFO</span></span></code></pre>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>0</code> - Valid format</li>
<li><code>1</code> - Invalid format</li>
</ul>
<p><strong>Example</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#F97583">if</span><span style="color:#B392F0"> validate_step_format</span><span style="color:#9ECBFF"> "00-check.sh|Check Prerequisites|5"</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#79B8FF">    echo</span><span style="color:#9ECBFF"> "Valid"</span></span>
<span class="line"><span style="color:#F97583">fi</span></span></code></pre>
<h4 id="calculate_total_duration"><code>calculate_total_duration()</code></h4>
<p><strong>Purpose</strong>: Sum estimated durations from all steps</p>
<p><strong>Signature</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">calculate_total_duration</span><span style="color:#9ECBFF"> INSTALL_STEPS[@]</span></span></code></pre>
<p><strong>Returns</strong>: Total duration in seconds</p>
<p><strong>Example</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#E1E4E8">total</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">$(</span><span style="color:#B392F0">calculate_total_duration</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "Estimated time: $(</span><span style="color:#B392F0">format_duration</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$total</span><span style="color:#9ECBFF">")"</span></span></code></pre>
<hr>
<h2 id="usage-examples">Usage Examples</h2>
<h3 id="example-1-simple-3-step-installer">Example 1: Simple 3-Step Installer</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -euo</span><span style="color:#9ECBFF"> pipefail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"$(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> "$(</span><span style="color:#B392F0">dirname</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">BASH_SOURCE</span><span style="color:#9ECBFF">[0]}")" &#x26;&#x26; </span><span style="color:#79B8FF">pwd</span><span style="color:#9ECBFF">)"</span></span>
<span class="line"><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"${</span><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#9ECBFF">}/steps"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#9ECBFF">}/common.sh"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/installers/common/manager-runner.sh"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#79B8FF">    declare</span><span style="color:#79B8FF"> -a</span><span style="color:#9ECBFF"> INSTALL_STEPS=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#B392F0">        "00-check-prerequisites.sh|Check Prerequisites|5"</span></span>
<span class="line"><span style="color:#B392F0">        "01-install-package.sh|Install Package|20"</span></span>
<span class="line"><span style="color:#B392F0">        "02-verify.sh|Verify Installation|5"</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    run_install_steps</span><span style="color:#9ECBFF"> "Simple Package"</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$STEPS_DIR</span><span style="color:#9ECBFF">"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">$@</span><span style="color:#9ECBFF">"</span></span></code></pre>
<h3 id="example-2-complex-multi-stage-installer">Example 2: Complex Multi-Stage Installer</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -euo</span><span style="color:#9ECBFF"> pipefail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"$(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> "$(</span><span style="color:#B392F0">dirname</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">BASH_SOURCE</span><span style="color:#9ECBFF">[0]}")" &#x26;&#x26; </span><span style="color:#79B8FF">pwd</span><span style="color:#9ECBFF">)"</span></span>
<span class="line"><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"${</span><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#9ECBFF">}/steps"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#9ECBFF">}/common.sh"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/installers/common/manager-runner.sh"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">    # Stage 1: Prerequisites and downloads</span></span>
<span class="line"><span style="color:#F97583">    declare</span><span style="color:#79B8FF"> -a</span><span style="color:#E1E4E8"> INSTALL_STEPS</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">        "00-check-prerequisites.sh|Check Prerequisites|5"</span></span>
<span class="line"><span style="color:#9ECBFF">        "01-download-dependencies.sh|Download Dependencies|45"</span></span>
<span class="line"><span style="color:#9ECBFF">        "02-extract-archives.sh|Extract Archives|15"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        # Stage 2: Build from source</span></span>
<span class="line"><span style="color:#9ECBFF">        "03-configure-build.sh|Configure Build System|10"</span></span>
<span class="line"><span style="color:#9ECBFF">        "04-compile-source.sh|Compile Source Code|120"</span></span>
<span class="line"><span style="color:#9ECBFF">        "05-run-tests.sh|Run Test Suite|60"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        # Stage 3: Installation and configuration</span></span>
<span class="line"><span style="color:#9ECBFF">        "06-install-binaries.sh|Install Binaries|10"</span></span>
<span class="line"><span style="color:#9ECBFF">        "07-configure-system.sh|Configure System|15"</span></span>
<span class="line"><span style="color:#9ECBFF">        "08-create-symlinks.sh|Create Symlinks|5"</span></span>
<span class="line"><span style="color:#9ECBFF">        "09-verify-installation.sh|Verify Installation|5"</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    run_install_steps</span><span style="color:#9ECBFF"> "Complex Build System"</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$STEPS_DIR</span><span style="color:#9ECBFF">"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">$@</span><span style="color:#9ECBFF">"</span></span></code></pre>
<h3 id="example-3-conditional-steps-advanced">Example 3: Conditional Steps (Advanced)</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -euo</span><span style="color:#9ECBFF"> pipefail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"$(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> "$(</span><span style="color:#B392F0">dirname</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">BASH_SOURCE</span><span style="color:#9ECBFF">[0]}")" &#x26;&#x26; </span><span style="color:#79B8FF">pwd</span><span style="color:#9ECBFF">)"</span></span>
<span class="line"><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"${</span><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#9ECBFF">}/steps"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#9ECBFF">}/common.sh"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/installers/common/manager-runner.sh"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">    # Build step array based on conditions</span></span>
<span class="line"><span style="color:#F97583">    declare</span><span style="color:#79B8FF"> -a</span><span style="color:#E1E4E8"> INSTALL_STEPS</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">        "00-check-prerequisites.sh|Check Prerequisites|5"</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Add OS-specific steps</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> [[ </span><span style="color:#9ECBFF">"$(</span><span style="color:#B392F0">uname</span><span style="color:#9ECBFF">)"</span><span style="color:#F97583"> ==</span><span style="color:#9ECBFF"> "Linux"</span><span style="color:#E1E4E8"> ]]; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#E1E4E8">        INSTALL_STEPS</span><span style="color:#F97583">+=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">            "01-install-apt-packages.sh|Install APT Packages|30"</span></span>
<span class="line"><span style="color:#E1E4E8">        )</span></span>
<span class="line"><span style="color:#F97583">    elif</span><span style="color:#E1E4E8"> [[ </span><span style="color:#9ECBFF">"$(</span><span style="color:#B392F0">uname</span><span style="color:#9ECBFF">)"</span><span style="color:#F97583"> ==</span><span style="color:#9ECBFF"> "Darwin"</span><span style="color:#E1E4E8"> ]]; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#E1E4E8">        INSTALL_STEPS</span><span style="color:#F97583">+=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">            "01-install-brew-packages.sh|Install Homebrew Packages|30"</span></span>
<span class="line"><span style="color:#E1E4E8">        )</span></span>
<span class="line"><span style="color:#F97583">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Common steps</span></span>
<span class="line"><span style="color:#E1E4E8">    INSTALL_STEPS</span><span style="color:#F97583">+=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">        "02-configure.sh|Configure Component|10"</span></span>
<span class="line"><span style="color:#9ECBFF">        "03-verify.sh|Verify Installation|5"</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    run_install_steps</span><span style="color:#9ECBFF"> "Cross-Platform Component"</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$STEPS_DIR</span><span style="color:#9ECBFF">"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">$@</span><span style="color:#9ECBFF">"</span></span></code></pre>
<hr>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-step-script-design">1. Step Script Design</h3>
<p><strong>DO</strong>:
âœ… Use <code>set -euo pipefail</code> for proper error handling
âœ… Source required libraries (logging.sh, utils.sh)
âœ… Log at appropriate levels (INFO, SUCCESS, ERROR)
âœ… Return proper exit codes (0=success, 1=failure)
âœ… Keep steps focused (single responsibility)
âœ… Make steps idempotent (can run multiple times safely)</p>
<p><strong>DONâ€™T</strong>:
âŒ Use hard-coded paths (use REPO_ROOT, SCRIPT_DIR)
âŒ Ignore errors (always check command exit codes)
âŒ Write overly long steps (split into multiple)
âŒ Skip prerequisite checks (validate early)
âŒ Use interactive prompts (breaks automation)</p>
<h3 id="2-duration-estimates">2. Duration Estimates</h3>
<p><strong>Guidelines</strong>:</p>
<ul>
<li>Round to nearest 5 seconds</li>
<li>Over-estimate rather than under-estimate</li>
<li>Test on slower hardware if possible</li>
<li>Account for network variability (downloads)</li>
<li>Consider build parallelization (<code>-j$(nproc)</code>)</li>
</ul>
<p><strong>Examples</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Quick checks (no I/O)</span></span>
<span class="line"><span style="color:#B392F0">"00-check-prerequisites.sh|Check Prerequisites|5"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># File operations (local disk)</span></span>
<span class="line"><span style="color:#B392F0">"02-extract-tarball.sh|Extract Tarball|10"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Network operations (variable)</span></span>
<span class="line"><span style="color:#B392F0">"01-download-package.sh|Download Package|30"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># CPU-intensive operations</span></span>
<span class="line"><span style="color:#B392F0">"04-build-project.sh|Build Project|90"</span></span></code></pre>
<h3 id="3-display-names">3. Display Names</h3>
<p><strong>Guidelines</strong>:</p>
<ul>
<li>Use active voice (â€œInstall Packageâ€ not â€œInstalling Packageâ€)</li>
<li>Keep under 50 characters</li>
<li>Use title case</li>
<li>Be specific (â€œInstall Node.jsâ€ not â€œInstallâ€)</li>
<li>Match user expectations</li>
</ul>
<p><strong>Examples</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Good</span></span>
<span class="line"><span style="color:#B392F0">"Install Python UV Package Manager"</span></span>
<span class="line"><span style="color:#B392F0">"Configure ZSH Shell Integration"</span></span>
<span class="line"><span style="color:#B392F0">"Verify Ghostty Installation"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Bad</span></span>
<span class="line"><span style="color:#B392F0">"installing python uv"</span><span style="color:#6A737D">  # Wrong case</span></span>
<span class="line"><span style="color:#B392F0">"Install"</span><span style="color:#6A737D">  # Too vague</span></span>
<span class="line"><span style="color:#B392F0">"Installing Python UV Package Manager and Configuring Shell"</span><span style="color:#6A737D">  # Too long</span></span></code></pre>
<h3 id="4-error-handling">4. Error Handling</h3>
<p><strong>Step Script Pattern</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -euo</span><span style="color:#9ECBFF"> pipefail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"$(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> "$(</span><span style="color:#B392F0">dirname</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">BASH_SOURCE</span><span style="color:#9ECBFF">[0]}")" &#x26;&#x26; </span><span style="color:#79B8FF">pwd</span><span style="color:#9ECBFF">)"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#9ECBFF">}/common.sh"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/core/logging.sh"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#B392F0">    log</span><span style="color:#9ECBFF"> "INFO"</span><span style="color:#9ECBFF"> "Starting operation..."</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Check prerequisites</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#F97583"> !</span><span style="color:#B392F0"> command_exists</span><span style="color:#9ECBFF"> "required_tool"</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#B392F0">        log</span><span style="color:#9ECBFF"> "ERROR"</span><span style="color:#9ECBFF"> "required_tool is not installed"</span></span>
<span class="line"><span style="color:#B392F0">        log</span><span style="color:#9ECBFF"> "ERROR"</span><span style="color:#9ECBFF"> "Install with: apt install required-tool"</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Perform operation with error checking</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#F97583"> !</span><span style="color:#B392F0"> some_command</span><span style="color:#79B8FF"> --option</span><span style="color:#9ECBFF"> arg</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#B392F0">        log</span><span style="color:#9ECBFF"> "ERROR"</span><span style="color:#9ECBFF"> "some_command failed"</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    log</span><span style="color:#9ECBFF"> "SUCCESS"</span><span style="color:#9ECBFF"> "Operation complete"</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">$@</span><span style="color:#9ECBFF">"</span></span></code></pre>
<h3 id="5-idempotency">5. Idempotency</h3>
<p><strong>Pattern for Idempotent Steps</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">    # Check if already installed</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#B392F0"> command_exists</span><span style="color:#9ECBFF"> "my_tool"</span><span style="color:#E1E4E8"> &#x26;&#x26; [[ </span><span style="color:#9ECBFF">"$(</span><span style="color:#B392F0">my_tool</span><span style="color:#79B8FF"> --version</span><span style="color:#9ECBFF">)"</span><span style="color:#F97583"> ==</span><span style="color:#9ECBFF"> "1.2.3"</span><span style="color:#E1E4E8"> ]]; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#B392F0">        log</span><span style="color:#9ECBFF"> "INFO"</span><span style="color:#9ECBFF"> "my_tool 1.2.3 already installed (skipping)"</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> 0</span><span style="color:#6A737D">  # Success (idempotent)</span></span>
<span class="line"><span style="color:#F97583">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Perform installation</span></span>
<span class="line"><span style="color:#B392F0">    log</span><span style="color:#9ECBFF"> "INFO"</span><span style="color:#9ECBFF"> "Installing my_tool 1.2.3..."</span></span>
<span class="line"><span style="color:#6A737D">    # ... installation logic ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    log</span><span style="color:#9ECBFF"> "SUCCESS"</span><span style="color:#9ECBFF"> "my_tool 1.2.3 installed"</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<hr>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues">Common Issues</h3>
<h4 id="issue-1-step-format-validation-error">Issue 1: Step Format Validation Error</h4>
<p><strong>Symptom</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>[ERROR] Invalid step format: '00-check.sh|Check Prerequisites' (expected: 'script|name|duration')</span></span></code></pre>
<p><strong>Cause</strong>: Missing duration field</p>
<p><strong>Solution</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Wrong</span></span>
<span class="line"><span style="color:#B392F0">"00-check.sh|Check Prerequisites"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Correct</span></span>
<span class="line"><span style="color:#B392F0">"00-check.sh|Check Prerequisites|5"</span></span></code></pre>
<h4 id="issue-2-step-script-not-found">Issue 2: Step Script Not Found</h4>
<p><strong>Symptom</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>[ERROR] Step script not found: /path/to/steps/00-check.sh</span></span></code></pre>
<p><strong>Cause</strong>: Script filename mismatch or file doesnâ€™t exist</p>
<p><strong>Solution</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Verify script exists</span></span>
<span class="line"><span style="color:#B392F0">ls</span><span style="color:#79B8FF"> -la</span><span style="color:#9ECBFF"> lib/installers/my_component/steps/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Check filename matches INSTALL_STEPS array</span></span>
<span class="line"><span style="color:#B392F0">grep</span><span style="color:#9ECBFF"> "00-check"</span><span style="color:#9ECBFF"> lib/installers/my_component/install.sh</span></span></code></pre>
<h4 id="issue-3-step-script-not-executable">Issue 3: Step Script Not Executable</h4>
<p><strong>Symptom</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>[WARNING] Step script not executable, attempting to fix: /path/to/steps/00-check.sh</span></span></code></pre>
<p><strong>Cause</strong>: Script missing executable permission</p>
<p><strong>Solution</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Make all step scripts executable</span></span>
<span class="line"><span style="color:#B392F0">chmod</span><span style="color:#9ECBFF"> +x</span><span style="color:#9ECBFF"> lib/installers/my_component/steps/</span><span style="color:#79B8FF">*</span><span style="color:#9ECBFF">.sh</span></span></code></pre>
<h4 id="issue-4-tui-not-displaying">Issue 4: TUI Not Displaying</h4>
<p><strong>Symptom</strong>: Plain text output instead of styled TUI</p>
<p><strong>Cause</strong>: gum not installed or TUI not initialized</p>
<p><strong>Solution</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Check if gum is installed</span></span>
<span class="line"><span style="color:#79B8FF">command</span><span style="color:#79B8FF"> -v</span><span style="color:#9ECBFF"> gum</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Install gum</span></span>
<span class="line"><span style="color:#B392F0">go</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> github.com/charmbracelet/gum@latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Verify TUI initialization in install.sh</span></span>
<span class="line"><span style="color:#B392F0">grep</span><span style="color:#9ECBFF"> "source.*manager-runner.sh"</span><span style="color:#9ECBFF"> lib/installers/my_component/install.sh</span></span></code></pre>
<h4 id="issue-5-duration-not-displaying">Issue 5: Duration Not Displaying</h4>
<p><strong>Symptom</strong>: Duration shows as 0s</p>
<p><strong>Cause</strong>: Invalid duration format (not a number)</p>
<p><strong>Solution</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Wrong</span></span>
<span class="line"><span style="color:#B392F0">"00-check.sh|Check Prerequisites|five"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Correct</span></span>
<span class="line"><span style="color:#B392F0">"00-check.sh|Check Prerequisites|5"</span></span></code></pre>
<hr>
<h2 id="advanced-topics">Advanced Topics</h2>
<h3 id="custom-tui-styling">Custom TUI Styling</h3>
<p>If you need custom styling beyond the default, you can:</p>
<ol>
<li><strong>Modify manager-runner.sh</strong> (affects all installers)</li>
<li><strong>Call TUI functions directly</strong> (component-specific styling)</li>
</ol>
<p><strong>Example</strong> (Custom header in component manager):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">    # Initialize TUI</span></span>
<span class="line"><span style="color:#79B8FF">    source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/ui/tui.sh"</span></span>
<span class="line"><span style="color:#B392F0">    init_tui</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Custom header</span></span>
<span class="line"><span style="color:#B392F0">    show_box</span><span style="color:#9ECBFF"> "My Custom Header"</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">        "Version: 1.2.3"</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">        "Author: John Doe"</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">        "License: MIT"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Standard installation</span></span>
<span class="line"><span style="color:#F97583">    declare</span><span style="color:#79B8FF"> -a</span><span style="color:#E1E4E8"> INSTALL_STEPS</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">...</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#B392F0">    run_install_steps</span><span style="color:#9ECBFF"> "My Component"</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$STEPS_DIR</span><span style="color:#9ECBFF">"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="integration-with-startsh">Integration with start.sh</h3>
<p>To integrate your component manager with the main <code>start.sh</code> orchestrator:</p>
<ol>
<li>Add your component to the global components list</li>
<li>Source your installer in start.sh</li>
<li>Call your installer during orchestration</li>
</ol>
<p><strong>Example</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># In start.sh</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/installers/my_component/install.sh"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Call during installation</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#F97583"> !</span><span style="color:#B392F0"> install_my_component</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#B392F0">    log</span><span style="color:#9ECBFF"> "ERROR"</span><span style="color:#9ECBFF"> "My Component installation failed"</span></span>
<span class="line"><span style="color:#79B8FF">    exit</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">fi</span></span></code></pre>
<h3 id="parallel-execution-future-enhancement">Parallel Execution (Future Enhancement)</h3>
<p>Currently, component managers run sequentially. For parallel execution:</p>
<p><strong>Option 1</strong>: Use GNU Parallel</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">parallel</span><span style="color:#9ECBFF"> :::</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">    "./lib/installers/component1/install.sh"</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">    "./lib/installers/component2/install.sh"</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">    "./lib/installers/component3/install.sh"</span></span></code></pre>
<p><strong>Option 2</strong>: Background processes with wait</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">./lib/installers/component1/install.sh</span><span style="color:#E1E4E8"> &#x26;</span></span>
<span class="line"><span style="color:#B392F0">./lib/installers/component2/install.sh</span><span style="color:#E1E4E8"> &#x26;</span></span>
<span class="line"><span style="color:#B392F0">./lib/installers/component3/install.sh</span><span style="color:#E1E4E8"> &#x26;</span></span>
<span class="line"><span style="color:#79B8FF">wait</span></span></code></pre>
<p><strong>Note</strong>: Parallel execution requires careful output buffering to avoid interleaved logs.</p>
<hr>
<h2 id="appendix">Appendix</h2>
<h3 id="complete-example-project">Complete Example Project</h3>
<p><strong>Directory Structure</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>lib/installers/example/</span></span>
<span class="line"><span>â”œâ”€â”€ install.sh</span></span>
<span class="line"><span>â””â”€â”€ steps/</span></span>
<span class="line"><span>    â”œâ”€â”€ common.sh</span></span>
<span class="line"><span>    â”œâ”€â”€ 00-check-prerequisites.sh</span></span>
<span class="line"><span>    â”œâ”€â”€ 01-download-package.sh</span></span>
<span class="line"><span>    â”œâ”€â”€ 02-install-package.sh</span></span>
<span class="line"><span>    â”œâ”€â”€ 03-configure.sh</span></span>
<span class="line"><span>    â””â”€â”€ 04-verify.sh</span></span></code></pre>
<p><strong>install.sh</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -euo</span><span style="color:#9ECBFF"> pipefail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"$(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> "$(</span><span style="color:#B392F0">dirname</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">BASH_SOURCE</span><span style="color:#9ECBFF">[0]}")" &#x26;&#x26; </span><span style="color:#79B8FF">pwd</span><span style="color:#9ECBFF">)"</span></span>
<span class="line"><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"${</span><span style="color:#E1E4E8">SCRIPT_DIR</span><span style="color:#9ECBFF">}/steps"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">STEPS_DIR</span><span style="color:#9ECBFF">}/common.sh"</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">REPO_ROOT</span><span style="color:#9ECBFF">}/lib/installers/common/manager-runner.sh"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#79B8FF">    declare</span><span style="color:#79B8FF"> -a</span><span style="color:#9ECBFF"> INSTALL_STEPS=</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#B392F0">        "00-check-prerequisites.sh|Check Prerequisites|5"</span></span>
<span class="line"><span style="color:#B392F0">        "01-download-package.sh|Download Package|30"</span></span>
<span class="line"><span style="color:#B392F0">        "02-install-package.sh|Install Package|10"</span></span>
<span class="line"><span style="color:#B392F0">        "03-configure.sh|Configure Component|10"</span></span>
<span class="line"><span style="color:#B392F0">        "04-verify.sh|Verify Installation|5"</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    run_install_steps</span><span style="color:#9ECBFF"> "Example Component"</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$STEPS_DIR</span><span style="color:#9ECBFF">"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">INSTALL_STEPS</span><span style="color:#9ECBFF">[</span><span style="color:#F97583">@</span><span style="color:#9ECBFF">]}"</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">main</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">$@</span><span style="color:#9ECBFF">"</span></span></code></pre>
<h3 id="references">References</h3>
<ul>
<li><strong>manager-runner.sh</strong>: <code>/home/kkk/Apps/ghostty-config-files/lib/installers/common/manager-runner.sh</code></li>
<li><strong>TUI Library</strong>: <code>/home/kkk/Apps/ghostty-config-files/lib/ui/tui.sh</code></li>
<li><strong>Collapsible Output</strong>: <code>/home/kkk/Apps/ghostty-config-files/lib/ui/collapsible.sh</code></li>
<li><strong>Logging</strong>: <code>/home/kkk/Apps/ghostty-config-files/lib/core/logging.sh</code></li>
<li><strong>Specification</strong>: <code>/home/kkk/Apps/ghostty-config-files/documentation/specifications/001-modern-tui-system/spec.md</code></li>
<li><strong>Implementation Status</strong>: <code>/home/kkk/Apps/ghostty-config-files/documentation/specifications/001-modern-tui-system/IMPLEMENTATION_STATUS.md</code></li>
</ul>
<hr>
<p><strong>End of Guide</strong></p>
<p><strong>Version</strong>: 1.0
<strong>Last Updated</strong>: 2025-11-21
<strong>Status</strong>: ACTIVE</p> <div class="mt-12"> <div class="divider"></div> <div class="flex gap-2 flex-wrap"> <span class="badge badge-outline">developer</span><span class="badge badge-outline">technical</span> </div> </div> </article> </main> <!-- Modern Glass Footer --> <footer class="footer footer-center bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl text-gray-900 dark:text-gray-100 p-10 mt-16 border-t border-gray-200/50 dark:border-gray-700/50"> <aside> <p class="font-bold text-xl mb-2">
Ghostty Configuration Files
</p> <p class="max-w-2xl text-gray-600 dark:text-gray-400">
A comprehensive terminal environment setup featuring Ghostty terminal emulator<br>
with 2025 performance optimizations, AI tools integration, and intelligent update management.
</p> <p class="text-sm text-gray-600 dark:text-gray-400 mt-4">
Built with Astro v5 + Tailwind CSS v4 + DaisyUI v5
</p> </aside> </footer>  </body> </html>