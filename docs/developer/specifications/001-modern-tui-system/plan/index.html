<!DOCTYPE html><html lang="en" data-theme="light" class="transition-colors duration-200"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/ghostty-config-files/favicon.svg"><meta name="generator" content="Astro v5.15.9"><title>Implementation Plan: Modern TUI Installation System | Ghostty Configuration Files</title><meta name="description" content="**Branch**: `001-modern-tui-system` | **Date**: 2025-11-18 | **Spec**: [spec.md](./spec.md)"><!-- OpenGraph --><meta property="og:title" content="Implementation Plan: Modern TUI Installation System"><meta property="og:description" content="**Branch**: `001-modern-tui-system` | **Date**: 2025-11-18 | **Spec**: [spec.md](./spec.md)"><meta property="og:type" content="website"><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/ghostty-config-files/_astro/_slug_.ZRO-SjbT.css"></head> <body class="min-h-screen bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 transition-colors duration-200 cyber-bg"> <!-- Modern Glass Morphism Navigation --> <nav class="fixed top-0 w-full backdrop-blur-xl bg-white/80 dark:bg-slate-900/80 shadow-lg border-b border-gray-200/50 dark:border-gray-700/50 z-50 transition-all duration-300"> <div class="full-width-section"> <div class="navbar"> <div class="flex-1"> <a href="/ghostty-config-files/" class="btn btn-ghost text-xl font-bold hover:text-blue-600 dark:hover:text-cyan-400 transition-all"> <span class="hidden md:inline">Ghostty Config Files</span> <span class="md:hidden">Ghostty</span> </a> </div> <div class="flex-none gap-2"> <ul class="menu menu-horizontal px-1 hidden lg:flex gap-4"> <li><a href="/ghostty-config-files/user-guide" class="nav-link">User Guide</a></li> <li><a href="/ghostty-config-files/ai-guidelines" class="nav-link">AI Guidelines</a></li> <li><a href="/ghostty-config-files/developer" class="nav-link">Developer</a></li> <li> <a href="https://github.com/kairin/ghostty-config-files" target="_blank" rel="noopener noreferrer" class="nav-link">
GitHub
</a> </li> </ul> <button id="theme-toggle" class="btn btn-ghost btn-circle" aria-label="Toggle theme" title="Toggle dark/light mode" data-astro-cid-x3pjskd3> <svg id="theme-icon-sun" class="h-6 w-6 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-x3pjskd3> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" data-astro-cid-x3pjskd3></path> </svg> <svg id="theme-icon-moon" class="h-6 w-6 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-x3pjskd3> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" data-astro-cid-x3pjskd3></path> </svg> </button> <script type="module">function c(){const e=document.documentElement,t=document.getElementById("theme-icon-sun"),n=document.getElementById("theme-icon-moon"),d=localStorage.getItem("theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches,o=d||(s?"dark":"light");o==="dark"?(e.setAttribute("data-theme","dark"),e.classList.add("dark"),t&&t.classList.remove("hidden"),n&&n.classList.add("hidden")):(e.setAttribute("data-theme","light"),e.classList.remove("dark"),t&&t.classList.add("hidden"),n&&n.classList.remove("hidden")),localStorage.setItem("theme",o)}function a(){const e=document.documentElement,t=document.getElementById("theme-icon-sun"),n=document.getElementById("theme-icon-moon"),s=e.getAttribute("data-theme")==="dark"?"light":"dark";e.setAttribute("data-theme",s),s==="dark"?(e.classList.add("dark"),t&&t.classList.remove("hidden"),n&&n.classList.add("hidden")):(e.classList.remove("dark"),t&&t.classList.add("hidden"),n&&n.classList.remove("hidden")),localStorage.setItem("theme",s)}c();const m=document.getElementById("theme-toggle");m&&m.addEventListener("click",a);document.addEventListener("astro:page-load",c);</script>  </div> </div> </div> </nav> <!-- Spacer for fixed nav --> <div class="h-20"></div> <!-- Main Content - Full Width --> <main class="w-full px-4 md:px-8 lg:px-12 xl:px-16 py-12"> <!-- Article Header (if metadata provided) --> <div class="mb-8 text-sm text-gray-600 dark:text-gray-400"> <time datetime="2025-11-25T00:00:00.000Z"> November 25, 2025 </time> <span> by Ghostty Config Team</span> </div> <!-- Page Content - Full Width with Max Readable for Prose --> <article class="prose prose-lg w-full max-w-none text-lg leading-relaxed">  <div class="breadcrumbs text-sm mb-6"> <ul> <li><a href="/ghostty-config-files/">Home</a></li> <li><a href="/ghostty-config-files/developer/architecture">Developer</a></li> <li>Implementation Plan: Modern TUI Installation System</li> </ul> </div> <h1>Implementation Plan: Modern TUI Installation System</h1> <p class="text-xl text-base-content/70 mb-8">**Branch**: `001-modern-tui-system` | **Date**: 2025-11-18 | **Spec**: [spec.md](./spec.md)</p><h1 id="implementation-plan-modern-tui-installation-system">Implementation Plan: Modern TUI Installation System</h1>
<p><strong>Branch</strong>: <code>001-modern-tui-system</code> | <strong>Date</strong>: 2025-11-18 | <strong>Spec</strong>: <a href="./spec.md">spec.md</a>
<strong>Input</strong>: Feature specification from <code>specs/001-modern-tui-system/spec.md</code></p>
<h2 id="summary">Summary</h2>
<p>Implement a professional, robust TUI installation system using gum framework (Charm Bracelet) with adaptive UTF-8/ASCII box drawing, real verification tests for all components, Docker-like collapsible output, exclusive uv (Python) and fnm (Node.js) package management, modular lib/ architecture, state persistence for resume capability, and comprehensive error handling with recovery suggestions. Delivers &#x3C;10 minute fresh installation, performance measured and logged fnm startup, zero broken characters across all terminals (SSH, legacy, modern), and 100% idempotent operations.</p>
<h2 id="technical-context">Technical Context</h2>
<p><strong>Language/Version</strong>: Bash 5.x+ (shell scripting for installation system)
<strong>Primary Dependencies</strong>:</p>
<ul>
<li>gum (Charm Bracelet TUI framework) v0.14.3+ - single binary, performance measured and logged startup</li>
<li>uv (Astral Python package manager) latest - 10-100x faster than pip</li>
<li>fnm (Fast Node Manager) latest - performance measured and logged startup (constitutional requirement)</li>
<li>jq (JSON processing) for state management</li>
<li>bc (calculations) for duration tracking</li>
</ul>
<p><strong>Storage</strong>:</p>
<ul>
<li>JSON state files for installation tracking (<code>/tmp/ghostty-start-logs/installation-state.json</code>)</li>
<li>Dual-format logging: structured JSON + human-readable text</li>
<li>State persistence for resume capability after interruption</li>
</ul>
<p><strong>Testing</strong>:</p>
<ul>
<li>Bash unit tests for verification functions (<code>lib/verification/unit_tests.sh</code>)</li>
<li>Integration tests for cross-component validation (<code>lib/verification/integration_tests.sh</code>)</li>
<li>Health checks pre/post installation (<code>lib/verification/health_checks.sh</code>)</li>
<li>Real system state verification (no hard-coded success messages)</li>
</ul>
<p><strong>Target Platform</strong>: Ubuntu 25.10+ (Questing) - fresh installations and existing systems
<strong>Project Type</strong>: Single-project shell infrastructure (installation orchestrator)</p>
<p><strong>Performance Goals</strong>:</p>
<ul>
<li>Total installation time: &#x3C;10 minutes on fresh Ubuntu system</li>
<li>fnm startup time: performance measured and logged (constitutional requirement - AGENTS.md line 55-57)</li>
<li>gum startup time: performance measured and logged (verified during installation)</li>
<li>Re-run (idempotency): &#x3C;30 seconds with all tasks skipped</li>
<li>Display updates: ≤5 seconds for long-running tasks</li>
</ul>
<p><strong>Constraints</strong>:</p>
<ul>
<li>Idempotent operations (safe to re-run without side effects)</li>
<li>Resume capability (interrupt-safe, state persistence)</li>
<li>SSH-compatible (ASCII fallback for box drawing)</li>
<li>Passwordless sudo recommended (but not required)</li>
<li>Zero GitHub Actions consumption (all CI/CD runs locally first)</li>
<li>Preserve user customizations during updates</li>
</ul>
<p><strong>Scale/Scope</strong>:</p>
<ul>
<li>10-15 installation tasks (Ghostty, ZSH, Python/uv, Node.js/fnm, AI tools, etc.)</li>
<li>Modular lib/ architecture (core, ui, tasks, verification)</li>
<li>100% verification coverage (every task has real verification function)</li>
<li>Multi-layer testing (unit, integration, health checks)</li>
</ul>
<h2 id="constitution-check">Constitution Check</h2>
<p><em>GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.</em></p>
<h3 id="principle-i-tui-framework-standard--compliant">Principle I: TUI Framework Standard ✅ COMPLIANT</h3>
<ul>
<li><strong>Requirement</strong>: gum (Charm Bracelet) exclusive for all TUI operations</li>
<li><strong>Implementation</strong>: gum used for spinners, progress bars, prompts, styling</li>
<li><strong>Fallback</strong>: Graceful degradation to plain text if gum unavailable</li>
<li><strong>Status</strong>: spec.md FR-001 mandates gum exclusive usage</li>
</ul>
<h3 id="principle-ii-adaptive-box-drawing--compliant">Principle II: Adaptive Box Drawing ✅ COMPLIANT</h3>
<ul>
<li><strong>Requirement</strong>: UTF-8/ASCII detection with automatic fallback</li>
<li><strong>Implementation</strong>: Terminal capability detection via TERM + LANG environment variables</li>
<li><strong>Manual Override</strong>: BOX_DRAWING=ascii/utf8 environment variable</li>
<li><strong>Status</strong>: spec.md FR-002-FR-005 define adaptive box drawing requirements</li>
</ul>
<h3 id="principle-iii-real-verification-tests--compliant">Principle III: Real Verification Tests ✅ COMPLIANT</h3>
<ul>
<li><strong>Requirement</strong>: No hard-coded success messages, real system state checks</li>
<li><strong>Implementation</strong>: Every installation task has corresponding <code>verify_&#x3C;component>()</code> function</li>
<li><strong>Multi-layer</strong>: Unit tests (per-component), integration tests (cross-component), health checks (pre/post)</li>
<li><strong>Status</strong>: spec.md FR-007-FR-012 mandate real verification functions</li>
</ul>
<h3 id="principle-iv-docker-like-collapsible-output--compliant">Principle IV: Docker-Like Collapsible Output ✅ COMPLIANT</h3>
<ul>
<li><strong>Requirement</strong>: Progressive summarization (completed tasks collapse to single lines)</li>
<li><strong>Implementation</strong>: Active task shows full output with spinner, completed tasks show <code>✓ Task name (duration)</code></li>
<li><strong>Verbose Mode</strong>: Press ‘v’ or —verbose flag to expand all output</li>
<li><strong>Status</strong>: spec.md FR-013-FR-019 define progressive summarization</li>
</ul>
<h3 id="principle-v-modular-lib-architecture--compliant">Principle V: Modular lib/ Architecture ✅ COMPLIANT</h3>
<ul>
<li><strong>Requirement</strong>: No monolithic scripts, modular library structure</li>
<li><strong>Implementation</strong>: lib/core/, lib/ui/, lib/tasks/, lib/verification/ separation</li>
<li><strong>Benefits</strong>: Independent testing, single responsibility, clear interfaces</li>
<li><strong>Status</strong>: spec.md FR-020-FR-031 define modular architecture</li>
</ul>
<h3 id="principle-vi-package-manager-exclusivity--compliant">Principle VI: Package Manager Exclusivity ✅ COMPLIANT</h3>
<ul>
<li><strong>Python</strong>: uv exclusively (spec.md FR-032-FR-033 prohibit pip/poetry/pipenv)</li>
<li><strong>Node.js</strong>: fnm exclusively (spec.md FR-034-FR-035 prohibit nvm/n/asdf)</li>
<li><strong>Constitutional</strong>: AGENTS.md line 55-57 mandate fnm performance measured and logged startup</li>
<li><strong>Status</strong>: Complete compliance with package manager requirements</li>
</ul>
<h3 id="principle-vii-structured-logging--compliant">Principle VII: Structured Logging ✅ COMPLIANT</h3>
<ul>
<li><strong>Requirement</strong>: Dual-format logging (JSON + human-readable)</li>
<li><strong>Implementation</strong>: /tmp/ghostty-start-logs/*.log and *.log.json</li>
<li><strong>Rotation</strong>: Keep last 10 installations</li>
<li><strong>Status</strong>: spec.md FR-039-FR-046 define logging requirements</li>
</ul>
<h3 id="principle-viii-error-handling--recovery--compliant">Principle VIII: Error Handling &#x26; Recovery ✅ COMPLIANT</h3>
<ul>
<li><strong>Requirement</strong>: Clear recovery suggestions, not just failure messages</li>
<li><strong>Implementation</strong>: Errors include what failed, why, how to fix</li>
<li><strong>Recovery</strong>: Continue-or-abort options, rollback capability</li>
<li><strong>Status</strong>: spec.md FR-047-FR-052 define error handling</li>
</ul>
<h3 id="principle-ix-idempotency--compliant">Principle IX: Idempotency ✅ COMPLIANT</h3>
<ul>
<li><strong>Requirement</strong>: Safe to re-run without side effects</li>
<li><strong>Implementation</strong>: Check existing state, skip completed tasks, preserve customizations</li>
<li><strong>Resume</strong>: State persistence for interrupted installations</li>
<li><strong>Status</strong>: spec.md FR-053-FR-058 define idempotency</li>
</ul>
<h3 id="principle-x-performance-standards--compliant">Principle X: Performance Standards ✅ COMPLIANT</h3>
<ul>
<li><strong>Total time</strong>: &#x3C;10 minutes fresh installation (spec.md FR-059)</li>
<li><strong>fnm startup</strong>: performance measured and logged (spec.md FR-060, AGENTS.md constitutional requirement)</li>
<li><strong>gum startup</strong>: performance measured and logged (spec.md FR-061)</li>
<li><strong>Parallel</strong>: Independent tasks execute in parallel (spec.md FR-062-063)</li>
</ul>
<h3 id="critical-file-preservation--compliant">Critical File Preservation ✅ COMPLIANT</h3>
<ul>
<li><strong>docs/.nojekyll</strong>: MUST NEVER delete (CRITICAL for GitHub Pages - not in this spec scope)</li>
<li><strong>.runners-local/</strong>: Current CI/CD infrastructure directory (not local-infra/)</li>
<li><strong>Directory naming</strong>: Verified .runners-local/ used correctly</li>
</ul>
<h3 id="technology-stack-compliance--compliant">Technology Stack Compliance ✅ COMPLIANT</h3>
<ul>
<li><strong>TUI Framework</strong>: gum (NOT whiptail/dialog/rich-cli) ✅</li>
<li><strong>Python</strong>: uv exclusive (NOT pip/poetry/pipenv) ✅</li>
<li><strong>Node.js</strong>: fnm exclusive (NOT nvm/n/asdf) ✅</li>
<li><strong>Node.js Version</strong>: Latest v25.2.0+ (NOT LTS/18+) ✅</li>
<li><strong>Component Library</strong>: N/A for this spec (website uses DaisyUI) ✅</li>
</ul>
<p><strong>CONSTITUTIONAL COMPLIANCE: 10/10 PASSED</strong> ✅</p>
<p>No constitutional violations. No complexity justification required.</p>
<h2 id="project-structure">Project Structure</h2>
<h3 id="documentation-this-feature">Documentation (this feature)</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="text"><code><span class="line"><span>specs/001-modern-tui-system/</span></span>
<span class="line"><span>├── plan.md              # This file (/speckit.plan output)</span></span>
<span class="line"><span>├── spec.md              # Feature specification (already exists)</span></span>
<span class="line"><span>├── research.md          # Phase 0 output (gum, collapsible, box drawing, verification, package managers)</span></span>
<span class="line"><span>├── data-model.md        # Phase 1 output (installation state, task model, verification model)</span></span>
<span class="line"><span>├── quickstart.md        # Phase 1 output (user guide for new TUI system)</span></span>
<span class="line"><span>└── contracts/           # Phase 1 output (interface definitions)</span></span>
<span class="line"><span>    ├── cli-interface.yaml              # start.sh command-line interface</span></span>
<span class="line"><span>    ├── verification-interface.yaml     # verify_*() function contracts</span></span>
<span class="line"><span>    ├── tui-interface.yaml              # TUI component contracts</span></span>
<span class="line"><span>    ├── task-interface.yaml             # Installation task contracts</span></span>
<span class="line"><span>    └── state-interface.yaml            # State persistence contracts</span></span></code></pre>
<h3 id="source-code-repository-root">Source Code (repository root)</h3>
<p>This feature implements a modular shell-based installation system following the lib/ architecture pattern:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="text"><code><span class="line"><span>/home/kkk/Apps/ghostty-config-files/</span></span>
<span class="line"><span>├── start.sh                          # Main entry point (orchestrator) - REFACTORED</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── lib/                              # Reusable library functions (NEW)</span></span>
<span class="line"><span>│   ├── core/                         # Core functionality</span></span>
<span class="line"><span>│   │   ├── logging.sh                # Dual-format logging (JSON + human-readable)</span></span>
<span class="line"><span>│   │   ├── state.sh                  # State management (resume capability)</span></span>
<span class="line"><span>│   │   ├── errors.sh                 # Error handling with recovery suggestions</span></span>
<span class="line"><span>│   │   └── utils.sh                  # Utility functions (get_visual_width, etc.)</span></span>
<span class="line"><span>│   │</span></span>
<span class="line"><span>│   ├── ui/                           # UI components</span></span>
<span class="line"><span>│   │   ├── tui.sh                    # gum integration and initialization</span></span>
<span class="line"><span>│   │   ├── boxes.sh                  # Adaptive box drawing (UTF-8/ASCII)</span></span>
<span class="line"><span>│   │   ├── collapsible.sh            # Progressive summarization (Docker-like)</span></span>
<span class="line"><span>│   │   └── progress.sh               # Progress bars and spinners</span></span>
<span class="line"><span>│   │</span></span>
<span class="line"><span>│   ├── tasks/                        # Installation tasks (one file per component)</span></span>
<span class="line"><span>│   │   ├── ghostty.sh                # Ghostty installation + configuration</span></span>
<span class="line"><span>│   │   ├── zsh.sh                    # ZSH + Oh My ZSH setup</span></span>
<span class="line"><span>│   │   ├── python_uv.sh              # Python + uv installation</span></span>
<span class="line"><span>│   │   ├── nodejs_fnm.sh             # Node.js + fnm installation</span></span>
<span class="line"><span>│   │   ├── ai_tools.sh               # Claude/Gemini/Copilot CLI</span></span>
<span class="line"><span>│   │   └── context_menu.sh           # Nautilus "Open in Ghostty"</span></span>
<span class="line"><span>│   │</span></span>
<span class="line"><span>│   └── verification/                 # Verification tests (real system checks)</span></span>
<span class="line"><span>│       ├── unit_tests.sh             # Per-component verification functions</span></span>
<span class="line"><span>│       ├── integration_tests.sh      # Cross-component validation</span></span>
<span class="line"><span>│       └── health_checks.sh          # Pre/post installation health checks</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── .runners-local/                   # Local CI/CD infrastructure (EXISTING)</span></span>
<span class="line"><span>│   └── workflows/                    # Local workflow scripts</span></span>
<span class="line"><span>│       ├── gh-workflow-local.sh      # Local GitHub Actions simulation</span></span>
<span class="line"><span>│       └── performance-monitor.sh    # Performance benchmarks</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── configs/                          # Configuration files (EXISTING)</span></span>
<span class="line"><span>│   └── ghostty/                      # Ghostty configurations</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>└── logs/ or /tmp/ghostty-start-logs/ # Log output (GITIGNORED)</span></span>
<span class="line"><span>    ├── start-TIMESTAMP.log           # Human-readable log</span></span>
<span class="line"><span>    ├── start-TIMESTAMP.log.json      # Structured JSON log</span></span>
<span class="line"><span>    ├── errors.log                    # Critical errors only</span></span>
<span class="line"><span>    ├── performance.json              # Performance metrics</span></span>
<span class="line"><span>    ├── system_state_TIMESTAMP.json   # System state snapshots</span></span>
<span class="line"><span>    └── installation-state.json       # Resume state (task completion tracking)</span></span></code></pre>
<p><strong>Structure Decision</strong>: <strong>Single-project</strong> architecture selected</p>
<p><strong>Rationale</strong>: Installation system is a single cohesive orchestrator with modular library functions. Not a multi-project application, not web/mobile, but rather a shell-based utility with clear separation of concerns via lib/ directories. This matches constitutional Principle V (Modular lib/ Architecture) and enables independent testing of each component.</p>
<p><strong>Key Principles</strong>:</p>
<ul>
<li><strong>Single Responsibility</strong>: Each lib/ module has one clear purpose</li>
<li><strong>Independent Testing</strong>: lib/verification/ can test lib/tasks/ in isolation</li>
<li><strong>Clear Interfaces</strong>: contracts/ define expected behavior for each module</li>
<li><strong>Maintainability</strong>: Easy to add new tasks, verification functions, or UI components</li>
</ul>
<h2 id="phase-0-research">Phase 0: Research</h2>
<p><strong>Objective</strong>: Gather technical foundation for gum framework, collapsible output patterns, adaptive box drawing, real verification tests, and package manager integration.</p>
<p><strong>Research Topics</strong>:</p>
<ol>
<li>
<p><strong>gum (Charm Bracelet) Framework</strong></p>
<ul>
<li>Installation methods (apt repository, binary download)</li>
<li>API for spinners, progress bars, prompts, styling</li>
<li>UTF-8/ASCII adaptation mechanisms</li>
<li>Performance characteristics (performance measured and logged startup)</li>
<li>Integration patterns with bash scripts</li>
</ul>
</li>
<li>
<p><strong>Adaptive Box Drawing Techniques</strong></p>
<ul>
<li>Terminal capability detection (TERM, LANG, SSH_CONNECTION)</li>
<li>UTF-8 character sets (light, heavy, double-line)</li>
<li>ASCII fallback patterns (+, -, |)</li>
<li>Visual width calculation (ANSI escape sequence stripping)</li>
<li>Hybrid approaches (gum + custom bash)</li>
</ul>
</li>
<li>
<p><strong>Collapsible Output Patterns (Docker-like UX)</strong></p>
<ul>
<li>Progressive summarization (active task expands, completed collapse)</li>
<li>ANSI cursor management for in-place updates</li>
<li>Task status tracking (pending, running, success, failed)</li>
<li>Duration tracking and time estimation</li>
<li>Verbose mode toggle mechanisms</li>
</ul>
</li>
<li>
<p><strong>State Persistence for Resume Capability</strong></p>
<ul>
<li>JSON state file structure (completed tasks, failed tasks, system info)</li>
<li>Checkpoint creation and restoration</li>
<li>Idempotency detection (skip completed tasks)</li>
<li>Interrupt handling (trap SIGINT, SIGTERM)</li>
</ul>
</li>
<li>
<p><strong>Parallel Task Execution Patterns</strong></p>
<ul>
<li>Dependency resolution (topological sort)</li>
<li>Background job management (PIDs, wait)</li>
<li>Error aggregation from parallel tasks</li>
<li>Progress display for concurrent operations</li>
</ul>
</li>
<li>
<p><strong>Real Verification Test Design</strong></p>
<ul>
<li>Multi-layer verification (unit, integration, health)</li>
<li>System state checking (command existence, version, functionality)</li>
<li>Error diagnostics (what failed, why, how to fix)</li>
<li>Performance validation (fnm performance measured and logged, gum performance measured and logged)</li>
</ul>
</li>
<li>
<p><strong>uv (Python) and fnm (Node.js) Integration</strong></p>
<ul>
<li>Installation methods and verification</li>
<li>Shell integration (PATH, environment variables)</li>
<li>Constitutional compliance (fnm performance measured and logged, latest Node.js)</li>
<li>Migration from pip/nvm</li>
</ul>
</li>
</ol>
<p><strong>Output</strong>: <code>research.md</code> document with:</p>
<ul>
<li>gum framework best practices and API reference</li>
<li>Adaptive box drawing implementation guide</li>
<li>Collapsible output design patterns</li>
<li>State persistence architecture</li>
<li>Parallel execution strategies</li>
<li>Verification test framework design</li>
<li>Package manager integration guide</li>
</ul>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>All 7 research topics documented with code examples</li>
<li>Performance benchmarks gathered (gum startup, fnm startup)</li>
<li>Terminal compatibility matrix completed</li>
<li>Implementation patterns validated with proof-of-concept code</li>
</ul>
<p><strong>Timeline</strong>: Already completed (reference documents in /tmp/)</p>
<h2 id="phase-1-design">Phase 1: Design</h2>
<p><strong>Objective</strong>: Define data models, API contracts, and quick-start user guide.</p>
<h3 id="11-data-model-design">1.1 Data Model Design</h3>
<p><strong>Output</strong>: <code>data-model.md</code></p>
<p><strong>Core Entities</strong>:</p>
<ol>
<li>
<p><strong>Installation Task</strong></p>
<ul>
<li>Properties: id, name, description, verify_function, dependencies[], estimated_duration, status, actual_duration, error_message</li>
<li>States: pending, running, success, failed, skipped</li>
<li>Lifecycle: define → validate dependencies → execute → verify → mark complete/failed</li>
</ul>
</li>
<li>
<p><strong>System State Snapshot</strong></p>
<ul>
<li>Properties: timestamp, hostname, os_info{name,version,kernel,architecture}, installed_packages{}, disk_usage, memory_usage, active_services[]</li>
<li>Usage: Captured before/after installation for debugging</li>
<li>Storage: <code>/tmp/ghostty-start-logs/system_state_TIMESTAMP.json</code></li>
</ul>
</li>
<li>
<p><strong>Verification Result</strong></p>
<ul>
<li>Properties: task_name, verify_function, exit_code, stdout, stderr, duration, timestamp, success</li>
<li>Multi-layer: unit_test_result{}, integration_test_result{}, health_check_result{}</li>
<li>Error Diagnostics: what_failed, why_failed, how_to_fix</li>
</ul>
</li>
<li>
<p><strong>Installation State (Resume)</strong></p>
<ul>
<li>Properties: version, last_run, completed_tasks[], failed_tasks[], system_info{}</li>
<li>Persistence: JSON file for interrupt recovery</li>
<li>Idempotency: Skip tasks in completed_tasks[] on re-run</li>
</ul>
</li>
<li>
<p><strong>Performance Metrics</strong></p>
<ul>
<li>Properties: task_name, start_time, end_time, duration, cpu_usage, memory_usage, disk_io</li>
<li>Aggregation: Total time, per-task breakdown, bottleneck identification</li>
<li>Validation: fnm performance measured and logged, gum performance measured and logged, total &#x3C;10min</li>
</ul>
</li>
</ol>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>Complete entity-relationship diagram</li>
<li>JSON schema for each entity</li>
<li>State transition diagrams for task lifecycle</li>
<li>Example data instances for testing</li>
</ul>
<h3 id="12-contract-definitions">1.2 Contract Definitions</h3>
<p><strong>Output</strong>: <code>contracts/</code> directory with YAML interface definitions</p>
<p><strong>Files Created</strong>:</p>
<ol>
<li>
<p><strong>cli-interface.yaml</strong> - start.sh command-line interface</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">start.sh</span></span>
<span class="line"><span style="color:#85E89D">description</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Main installation orchestrator</span></span>
<span class="line"><span style="color:#85E89D">options</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">--help</span></span>
<span class="line"><span style="color:#85E89D">    description</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Show usage information</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">--verbose</span></span>
<span class="line"><span style="color:#85E89D">    description</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Show expanded output (no collapsing)</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">--force-all</span></span>
<span class="line"><span style="color:#85E89D">    description</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Reinstall all components</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">--resume</span></span>
<span class="line"><span style="color:#85E89D">    description</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Resume interrupted installation</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">--skip-checks</span></span>
<span class="line"><span style="color:#85E89D">    description</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Skip pre-installation health checks</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">--box-style &#x3C;ascii|utf8|utf8-double></span></span>
<span class="line"><span style="color:#85E89D">    description</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Force box drawing style</span></span></code></pre>
</li>
<li>
<p><strong>verification-interface.yaml</strong> - verify_*() function contracts</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">function_pattern</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">verify_&#x3C;component>()</span></span>
<span class="line"><span style="color:#85E89D">requirements</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">Returns 0 on success, 1 on failure</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">Checks actual system state (NOT hard-coded)</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">Logs via log() function (TEST, SUCCESS, ERROR levels)</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">Includes diagnostic output on failure</span></span>
<span class="line"><span style="color:#85E89D">examples</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">verify_ghostty_installed</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">verify_zsh_configured</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">verify_nodejs_fnm</span></span></code></pre>
</li>
<li>
<p><strong>tui-interface.yaml</strong> - TUI component contracts</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">gum_integration</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">gum spin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Spinners for long-running tasks</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">gum style</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Box drawing and styling</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">gum confirm</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">User confirmations</span></span>
<span class="line"><span style="color:#85E89D">box_drawing</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">init_box_drawing()</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Terminal capability detection</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">draw_box(title, content[])</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Adaptive box rendering</span></span>
<span class="line"><span style="color:#85E89D">collapsible</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">render_task(id, name, status)</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Single task display</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">update_display()</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Full display refresh</span></span></code></pre>
</li>
<li>
<p><strong>task-interface.yaml</strong> - Installation task contracts</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">task_definition</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Unique task identifier</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Human-readable name</span></span>
<span class="line"><span style="color:#85E89D">  install_function</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">task_install_&#x3C;component>()</span></span>
<span class="line"><span style="color:#85E89D">  verify_function</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">verify_&#x3C;component>()</span></span>
<span class="line"><span style="color:#85E89D">  dependencies</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">prerequisite_task_ids</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">  estimated_duration</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Expected seconds</span></span>
<span class="line"><span style="color:#85E89D">execution_pattern</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#9ECBFF">  1. Check if already completed (state file)</span></span>
<span class="line"><span style="color:#9ECBFF">  2. Execute dependencies first</span></span>
<span class="line"><span style="color:#9ECBFF">  3. Run install_function</span></span>
<span class="line"><span style="color:#9ECBFF">  4. Run verify_function</span></span>
<span class="line"><span style="color:#9ECBFF">  5. Mark complete or failed in state</span></span></code></pre>
</li>
<li>
<p><strong>state-interface.yaml</strong> - State persistence contracts</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">state_file</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/tmp/ghostty-start-logs/installation-state.json</span></span>
<span class="line"><span style="color:#85E89D">operations</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">is_task_completed(task_id)</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Check completion</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">mark_task_completed(task_id)</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Mark success</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">mark_task_failed(task_id, error)</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Mark failure</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">load_state()</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Read from JSON</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">save_state()</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Write to JSON</span></span>
<span class="line"><span style="color:#85E89D">structure</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  version</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"2.0"</span></span>
<span class="line"><span style="color:#85E89D">  last_run</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ISO8601 timestamp</span></span>
<span class="line"><span style="color:#85E89D">  completed_tasks</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">task_ids</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">  failed_tasks</span><span style="color:#E1E4E8">: [{</span><span style="color:#9ECBFF">task_id</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">error_message</span><span style="color:#E1E4E8">}]</span></span>
<span class="line"><span style="color:#85E89D">  system_info</span><span style="color:#E1E4E8">: {</span><span style="color:#9ECBFF">os</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">kernel</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">architecture</span><span style="color:#E1E4E8">}</span></span></code></pre>
</li>
</ol>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>All 5 contract files created</li>
<li>Interfaces define clear input/output expectations</li>
<li>Examples provided for each contract type</li>
<li>Validation rules specified</li>
</ul>
<h3 id="13-quick-start-guide">1.3 Quick Start Guide</h3>
<p><strong>Output</strong>: <code>quickstart.md</code></p>
<p><strong>Sections</strong>:</p>
<ol>
<li>
<p><strong>One-Command Installation</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> /home/kkk/Apps/ghostty-config-files</span></span>
<span class="line"><span style="color:#B392F0">./start.sh</span></span></code></pre>
</li>
<li>
<p><strong>What to Expect</strong></p>
<ul>
<li>Progress display (Docker-like collapsible output)</li>
<li>Time estimates (installation takes &#x3C;10 minutes)</li>
<li>Automatic verification (real system checks)</li>
</ul>
</li>
<li>
<p><strong>Common Options</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">./start.sh</span><span style="color:#79B8FF"> --verbose</span><span style="color:#6A737D">         # Full output (no collapsing)</span></span>
<span class="line"><span style="color:#B392F0">./start.sh</span><span style="color:#79B8FF"> --resume</span><span style="color:#6A737D">          # Resume interrupted installation</span></span>
<span class="line"><span style="color:#B392F0">./start.sh</span><span style="color:#79B8FF"> --box-style</span><span style="color:#9ECBFF"> ascii</span><span style="color:#6A737D"> # Force ASCII boxes for SSH</span></span></code></pre>
</li>
<li>
<p><strong>Troubleshooting</strong></p>
<ul>
<li>Box drawing broken? Use <code>--box-style ascii</code></li>
<li>Installation interrupted? Use <code>--resume</code></li>
<li>Verification failed? Check logs in <code>/tmp/ghostty-start-logs/</code></li>
</ul>
</li>
<li>
<p><strong>Performance Expectations</strong></p>
<ul>
<li>Total time: &#x3C;10 minutes on fresh Ubuntu</li>
<li>Re-run (idempotency): &#x3C;30 seconds (all tasks skipped)</li>
<li>fnm startup: performance measured and logged (constitutional requirement)</li>
</ul>
</li>
</ol>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>Clear step-by-step instructions</li>
<li>Common issues documented with solutions</li>
<li>Performance expectations set</li>
<li>User-friendly formatting</li>
</ul>
<p><strong>Timeline</strong>: Phase 1 completion = All data models, contracts, and quickstart documented</p>
<h2 id="phase-2-implementation-waves">Phase 2: Implementation Waves</h2>
<h3 id="wave-1-core-infrastructure-week-1">Wave 1: Core Infrastructure (Week 1)</h3>
<p><strong>Objective</strong>: Establish foundation - gum installation, terminal detection, basic lib/ structure</p>
<p><strong>Tasks</strong>:</p>
<ol>
<li>Install gum as prerequisite (binary download + apt repository)</li>
<li>Implement <code>lib/core/logging.sh</code> (dual-format: JSON + human-readable)</li>
<li>Implement <code>lib/core/state.sh</code> (JSON state persistence)</li>
<li>Implement <code>lib/core/errors.sh</code> (error handling with recovery suggestions)</li>
<li>Implement <code>lib/core/utils.sh</code> (get_visual_width, duration calculations)</li>
<li>Implement <code>lib/ui/tui.sh</code> (gum integration wrapper)</li>
</ol>
<p><strong>Deliverables</strong>:</p>
<ul>
<li>gum installed and verified (performance measured and logged startup)</li>
<li>lib/core/*.sh modules with comprehensive logging</li>
<li>Test script: <code>tests/test-core-infrastructure.sh</code></li>
</ul>
<p><strong>Validation</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Test gum installation</span></span>
<span class="line"><span style="color:#79B8FF">command</span><span style="color:#79B8FF"> -v</span><span style="color:#9ECBFF"> gum</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#F97583">time</span><span style="color:#E1E4E8"> gum --version  </span><span style="color:#6A737D"># performance measured and logged</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test logging</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> lib/core/logging.sh</span></span>
<span class="line"><span style="color:#B392F0">log</span><span style="color:#9ECBFF"> "TEST"</span><span style="color:#9ECBFF"> "Test message"</span><span style="color:#6A737D">  # Outputs to console + JSON log</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test state management</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> lib/core/state.sh</span></span>
<span class="line"><span style="color:#B392F0">mark_task_completed</span><span style="color:#9ECBFF"> "test-task"</span></span>
<span class="line"><span style="color:#B392F0">is_task_completed</span><span style="color:#9ECBFF"> "test-task"</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "SUCCESS"</span></span></code></pre>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>gum startup performance measured and logged verified</li>
<li>Logging produces valid JSON and human-readable output</li>
<li>State persistence survives script restart</li>
</ul>
<h3 id="wave-2-adaptive-box-drawing-week-1">Wave 2: Adaptive Box Drawing (Week 1)</h3>
<p><strong>Objective</strong>: Implement UTF-8/ASCII adaptive box drawing with terminal detection</p>
<p><strong>Tasks</strong>:</p>
<ol>
<li>Implement <code>lib/ui/boxes.sh</code> - Adaptive box character selection</li>
<li>Implement terminal capability detection (TERM, LANG, SSH_CONNECTION)</li>
<li>Implement <code>draw_box()</code> function with gum fallback</li>
<li>Implement <code>get_visual_width()</code> with proper ANSI stripping</li>
<li>Add manual override via BOX_DRAWING environment variable</li>
</ol>
<p><strong>Deliverables</strong>:</p>
<ul>
<li>lib/ui/boxes.sh with UTF-8 and ASCII character sets</li>
<li>Terminal detection logic (UTF-8 vs ASCII)</li>
<li>Test script: <code>tests/test-box-drawing.sh</code></li>
</ul>
<p><strong>Validation</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Test UTF-8 mode</span></span>
<span class="line"><span style="color:#E1E4E8">BOX_DRAWING</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">utf8</span><span style="color:#B392F0"> ./tests/test-box-drawing.sh</span></span>
<span class="line"><span style="color:#6A737D"># Should show: ╔═══...═══╗</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test ASCII mode</span></span>
<span class="line"><span style="color:#E1E4E8">BOX_DRAWING</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">ascii</span><span style="color:#B392F0"> ./tests/test-box-drawing.sh</span></span>
<span class="line"><span style="color:#6A737D"># Should show: +---...---+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test automatic detection</span></span>
<span class="line"><span style="color:#B392F0">./tests/test-box-drawing.sh</span></span>
<span class="line"><span style="color:#6A737D"># Should auto-detect based on TERM/LANG</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test SSH compatibility</span></span>
<span class="line"><span style="color:#B392F0">ssh</span><span style="color:#9ECBFF"> localhost</span><span style="color:#9ECBFF"> ./tests/test-box-drawing.sh</span></span>
<span class="line"><span style="color:#6A737D"># Should use ASCII automatically</span></span></code></pre>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>Zero broken characters in Ghostty, xterm, SSH, TTY</li>
<li>Automatic detection works correctly</li>
<li>Manual override functions properly</li>
</ul>
<h3 id="wave-3-verification-framework-week-2">Wave 3: Verification Framework (Week 2)</h3>
<p><strong>Objective</strong>: Implement real verification tests for all components (no hard-coded success)</p>
<p><strong>Tasks</strong>:</p>
<ol>
<li>Implement <code>lib/verification/unit_tests.sh</code> - Per-component verification
<ul>
<li>verify_ghostty_installed()</li>
<li>verify_zsh_configured()</li>
<li>verify_nodejs_fnm()</li>
<li>verify_python_uv()</li>
<li>verify_claude_cli()</li>
<li>verify_gemini_cli()</li>
</ul>
</li>
<li>Implement <code>lib/verification/integration_tests.sh</code> - Cross-component validation</li>
<li>Implement <code>lib/verification/health_checks.sh</code> - Pre/post health checks</li>
</ol>
<p><strong>Deliverables</strong>:</p>
<ul>
<li>6+ verification functions with real system checks</li>
<li>Integration test suite</li>
<li>Health check system (passwordless sudo, disk space, network)</li>
</ul>
<p><strong>Validation</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Test individual verification functions</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> lib/verification/unit_tests.sh</span></span>
<span class="line"><span style="color:#B392F0">verify_ghostty_installed</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "Ghostty OK"</span></span>
<span class="line"><span style="color:#B392F0">verify_zsh_configured</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "ZSH OK"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test health checks</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> lib/verification/health_checks.sh</span></span>
<span class="line"><span style="color:#B392F0">pre_installation_health_check</span><span style="color:#F97583"> ||</span><span style="color:#79B8FF"> echo</span><span style="color:#9ECBFF"> "Prerequisites missing"</span></span></code></pre>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>100% of verification functions check actual system state</li>
<li>Verification accuracy ≥99% (no false positives/negatives)</li>
<li>Error diagnostics include what failed, why, how to fix</li>
</ul>
<h3 id="wave-4-task-modules-week-2-3">Wave 4: Task Modules (Week 2-3)</h3>
<p><strong>Objective</strong>: Create modular installation task files</p>
<p><strong>Tasks</strong>:</p>
<ol>
<li>Implement <code>lib/tasks/ghostty.sh</code> - Ghostty installation + configuration</li>
<li>Implement <code>lib/tasks/zsh.sh</code> - ZSH + Oh My ZSH setup</li>
<li>Implement <code>lib/tasks/python_uv.sh</code> - Python + uv installation</li>
<li>Implement <code>lib/tasks/nodejs_fnm.sh</code> - Node.js + fnm installation (latest v25.2.0+)</li>
<li>Implement <code>lib/tasks/ai_tools.sh</code> - Claude/Gemini/Copilot CLI</li>
<li>Implement <code>lib/tasks/context_menu.sh</code> - Nautilus integration</li>
</ol>
<p><strong>Deliverables</strong>:</p>
<ul>
<li>6 task modules with install + verify functions</li>
<li>Each module follows task-interface.yaml contract</li>
<li>Task dependency definitions</li>
</ul>
<p><strong>Validation</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Test individual task modules</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> lib/tasks/python_uv.sh</span></span>
<span class="line"><span style="color:#B392F0">task_install_uv</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#B392F0">verify_uv</span><span style="color:#F97583"> ||</span><span style="color:#79B8FF"> echo</span><span style="color:#9ECBFF"> "uv installation failed"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> lib/tasks/nodejs_fnm.sh</span></span>
<span class="line"><span style="color:#B392F0">task_install_fnm</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#B392F0">verify_fnm</span><span style="color:#F97583"> ||</span><span style="color:#79B8FF"> echo</span><span style="color:#9ECBFF"> "fnm installation failed"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Verify performance requirements</span></span>
<span class="line"><span style="color:#F97583">time</span><span style="color:#E1E4E8"> fnm env  </span><span style="color:#6A737D"># Must be performance measured and logged (constitutional requirement)</span></span></code></pre>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>All 6 task modules implement required functions</li>
<li>Verification functions return accurate status</li>
<li>fnm startup time performance measured and logged validated</li>
</ul>
<h3 id="wave-5-collapsible-output--progress-week-3">Wave 5: Collapsible Output &#x26; Progress (Week 3)</h3>
<p><strong>Objective</strong>: Implement Docker-like progressive summarization</p>
<p><strong>Tasks</strong>:</p>
<ol>
<li>Implement <code>lib/ui/collapsible.sh</code> - Task status tracking and rendering</li>
<li>Implement <code>lib/ui/progress.sh</code> - Progress bars and spinners</li>
<li>Implement <code>render_task()</code> - Single task display</li>
<li>Implement <code>update_display()</code> - Full display refresh with ANSI cursor management</li>
<li>Add verbose mode toggle (‘v’ key or —verbose flag)</li>
</ol>
<p><strong>Deliverables</strong>:</p>
<ul>
<li>lib/ui/collapsible.sh with Docker-like output</li>
<li>lib/ui/progress.sh with gum integration</li>
<li>Keyboard interaction for verbose toggle</li>
</ul>
<p><strong>Validation</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Test collapsible output</span></span>
<span class="line"><span style="color:#B392F0">./start.sh</span></span>
<span class="line"><span style="color:#6A737D"># Should show:</span></span>
<span class="line"><span style="color:#6A737D"># ✓ Task 1 (2.1s)</span></span>
<span class="line"><span style="color:#6A737D"># ✓ Task 2 (3.4s)</span></span>
<span class="line"><span style="color:#6A737D"># ⠋ Task 3 (running)</span></span>
<span class="line"><span style="color:#6A737D"># ⏸ Task 4 (queued)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test verbose mode</span></span>
<span class="line"><span style="color:#B392F0">./start.sh</span><span style="color:#79B8FF"> --verbose</span></span>
<span class="line"><span style="color:#6A737D"># All tasks expanded, no collapsing</span></span></code></pre>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>Completed tasks collapse to single line</li>
<li>Active task shows full output with spinner</li>
<li>Errors auto-expand with recovery suggestions</li>
<li>Progress updates every ≤5 seconds</li>
</ul>
<h3 id="wave-6-orchestration--integration-week-4">Wave 6: Orchestration &#x26; Integration (Week 4)</h3>
<p><strong>Objective</strong>: Refactor start.sh to use modular lib/ architecture</p>
<p><strong>Tasks</strong>:</p>
<ol>
<li>Backup current start.sh to start-legacy.sh</li>
<li>Create new start.sh orchestrator (minimal, loads lib/ modules)</li>
<li>Implement task registry with dependency resolution</li>
<li>Implement parallel task execution (independent tasks)</li>
<li>Integrate all lib/ modules (core, ui, tasks, verification)</li>
<li>Add command-line argument parsing (—help, —verbose, —resume, etc.)</li>
</ol>
<p><strong>Deliverables</strong>:</p>
<ul>
<li>New modular start.sh (&#x3C;200 lines, orchestrator only)</li>
<li>start-legacy.sh (backup of original)</li>
<li>Task registry with topological sort for dependencies</li>
<li>Parallel execution for independent tasks</li>
</ul>
<p><strong>Validation</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Test new modular start.sh</span></span>
<span class="line"><span style="color:#B392F0">./start.sh</span><span style="color:#79B8FF"> --help</span></span>
<span class="line"><span style="color:#6A737D"># Should show comprehensive usage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test dry-run</span></span>
<span class="line"><span style="color:#B392F0">./start.sh</span><span style="color:#79B8FF"> --skip-checks</span><span style="color:#79B8FF"> --verbose</span></span>
<span class="line"><span style="color:#6A737D"># Should load all modules without errors</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test full installation (Docker)</span></span>
<span class="line"><span style="color:#B392F0">docker</span><span style="color:#9ECBFF"> run</span><span style="color:#79B8FF"> -it</span><span style="color:#9ECBFF"> ubuntu:25.10</span><span style="color:#9ECBFF"> /bin/bash</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> "</span></span>
<span class="line"><span style="color:#9ECBFF">    git clone https://github.com/user/ghostty-config-files.git</span></span>
<span class="line"><span style="color:#9ECBFF">    cd ghostty-config-files</span></span>
<span class="line"><span style="color:#9ECBFF">    git checkout 001-modern-tui-system</span></span>
<span class="line"><span style="color:#9ECBFF">    ./start.sh</span></span>
<span class="line"><span style="color:#9ECBFF">"</span></span></code></pre>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>start.sh loads all lib/ modules successfully</li>
<li>Task dependencies resolved correctly (topological sort)</li>
<li>Parallel execution reduces time by 30-40%</li>
<li>Total installation time &#x3C;10 minutes</li>
</ul>
<h2 id="phase-3-testing--validation">Phase 3: Testing &#x26; Validation</h2>
<p><strong>Objective</strong>: Comprehensive testing across environments and edge cases</p>
<h3 id="testing-matrix">Testing Matrix</h3>



























































<table><thead><tr><th>Test</th><th>Environment</th><th>Expected Outcome</th><th>Validation Method</th></tr></thead><tbody><tr><td>Fresh Install</td><td>Ubuntu 25.10 (clean VM)</td><td>All components installed, verified</td><td><code>./start.sh</code> succeeds, all verify_*() pass</td></tr><tr><td>Idempotency</td><td>After fresh install</td><td>All tasks skipped, &#x3C;30s completion</td><td><code>./start.sh</code> detects existing installations</td></tr><tr><td>Resume</td><td>Interrupted install</td><td>Resume from checkpoint</td><td>Kill mid-install, <code>./start.sh --resume</code> continues</td></tr><tr><td>Box Drawing</td><td>Ghostty, xterm, SSH</td><td>Proper rendering everywhere</td><td>Visual inspection, no broken chars</td></tr><tr><td>Performance</td><td>Fresh system</td><td>&#x3C;10min total, fnm performance measured and logged, gum performance measured and logged</td><td><code>time ./start.sh</code>, <code>time fnm env</code></td></tr><tr><td>Parallel Tasks</td><td>uv + fnm install</td><td>Both complete successfully</td><td>Logs show concurrent execution</td></tr><tr><td>Error Recovery</td><td>Simulated failure</td><td>Recovery options offered</td><td>Inject failure, verify error handling</td></tr><tr><td>SSH Install</td><td>SSH connection</td><td>ASCII box drawing, full functionality</td><td><code>ssh user@host ./start.sh</code></td></tr></tbody></table>
<h3 id="test-scripts">Test Scripts</h3>
<p><strong>Created</strong>:</p>
<ol>
<li><code>tests/test-fresh-install.sh</code> - Docker-based fresh installation</li>
<li><code>tests/test-idempotency.sh</code> - Re-run safety validation</li>
<li><code>tests/test-resume.sh</code> - Interrupt and resume capability</li>
<li><code>tests/test-cross-terminal.sh</code> - Terminal compatibility matrix</li>
<li><code>tests/test-performance.sh</code> - Performance benchmarks</li>
<li><code>tests/test-error-recovery.sh</code> - Error injection and recovery</li>
</ol>
<p><strong>Validation Commands</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Run complete test suite</span></span>
<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> test </span><span style="color:#F97583">in</span><span style="color:#9ECBFF"> tests/test-*.sh</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#79B8FF">    echo</span><span style="color:#9ECBFF"> "Running </span><span style="color:#E1E4E8">$test</span><span style="color:#9ECBFF">..."</span></span>
<span class="line"><span style="color:#B392F0">    "</span><span style="color:#E1E4E8">$test</span><span style="color:#B392F0">"</span><span style="color:#F97583"> ||</span><span style="color:#79B8FF"> echo</span><span style="color:#9ECBFF"> "FAILED: </span><span style="color:#E1E4E8">$test</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#F97583">done</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Performance benchmarks</span></span>
<span class="line"><span style="color:#B392F0">tests/test-performance.sh</span></span>
<span class="line"><span style="color:#6A737D"># Expected output:</span></span>
<span class="line"><span style="color:#6A737D"># - Total installation: &#x3C;10 minutes ✓</span></span>
<span class="line"><span style="color:#6A737D"># - fnm startup: performance measured and logged ✓</span></span>
<span class="line"><span style="color:#6A737D"># - gum startup: performance measured and logged ✓</span></span>
<span class="line"><span style="color:#6A737D"># - Idempotent re-run: &#x3C;30s ✓</span></span></code></pre>
<h3 id="success-criteria">Success Criteria</h3>
<p><strong>Functional</strong>:</p>
<ul>
<li>✅ Installation success rate ≥99% across tested configurations</li>
<li>✅ Verification accuracy ≥99% (no false positives/negatives)</li>
<li>✅ Zero broken box characters in all terminals</li>
<li>✅ 100% task verification coverage (no hard-coded success)</li>
</ul>
<p><strong>Performance</strong>:</p>
<ul>
<li>✅ Total installation time &#x3C;10 minutes (fresh Ubuntu 25.10)</li>
<li>✅ fnm startup time performance measured and logged (constitutional requirement)</li>
<li>✅ gum startup time performance measured and logged</li>
<li>✅ Re-run (idempotent) &#x3C;30 seconds</li>
<li>✅ Parallel execution 30-40% faster than sequential</li>
</ul>
<p><strong>Quality</strong>:</p>
<ul>
<li>✅ Idempotency: Safe to re-run, all tasks skipped when complete</li>
<li>✅ Resume: Interrupted install can resume from checkpoint</li>
<li>✅ Error recovery: Clear suggestions for all failure modes</li>
<li>✅ User customizations preserved during updates</li>
<li>✅ Logs capture full system state for debugging</li>
</ul>
<h2 id="phase-4-documentation--deployment">Phase 4: Documentation &#x26; Deployment</h2>
<p><strong>Objective</strong>: Complete documentation and prepare for main branch merge</p>
<h3 id="documentation-tasks">Documentation Tasks</h3>
<ol>
<li>
<p><strong>Update README.md</strong></p>
<ul>
<li>Modern TUI system highlights</li>
<li>One-command installation instructions</li>
<li>New command-line options (—verbose, —resume, —box-style)</li>
<li>Troubleshooting guide (box drawing, SSH, verification failures)</li>
</ul>
</li>
<li>
<p><strong>Create ARCHITECTURE.md</strong></p>
<ul>
<li>lib/ modular architecture explanation</li>
<li>Data flow diagrams (spec → plan → implementation)</li>
<li>Component interaction diagrams</li>
<li>Design decisions and rationale</li>
</ul>
</li>
<li>
<p><strong>Update AGENTS.md</strong></p>
<ul>
<li>Reference new TUI system</li>
<li>Update installation instructions</li>
<li>Add troubleshooting for TUI-specific issues</li>
</ul>
</li>
<li>
<p><strong>Create Migration Guide</strong></p>
<ul>
<li>Differences between start.sh and start-legacy.sh</li>
<li>How to rollback if needed</li>
<li>User customization preservation</li>
</ul>
</li>
</ol>
<h3 id="deployment-checklist">Deployment Checklist</h3>
<p><strong>Pre-Merge</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> All tests pass (fresh install, idempotency, resume, performance)</li>
<li class="task-list-item"><input type="checkbox" disabled> Constitutional compliance verified (10/10 principles)</li>
<li class="task-list-item"><input type="checkbox" disabled> Local CI/CD workflows pass (<code>./.runners-local/workflows/gh-workflow-local.sh all</code>)</li>
<li class="task-list-item"><input type="checkbox" disabled> Performance benchmarks meet targets (&#x3C;10min, performance measured and logged fnm, performance measured and logged gum)</li>
<li class="task-list-item"><input type="checkbox" disabled> Documentation complete (README, ARCHITECTURE, quickstart)</li>
</ul>
<p><strong>Merge Workflow</strong> (Constitutional Branch Strategy):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Create timestamped branch (already created: 001-modern-tui-system)</span></span>
<span class="line"><span style="color:#E1E4E8">DATETIME</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">$(</span><span style="color:#B392F0">date</span><span style="color:#9ECBFF"> +"%Y%m%d-%H%M%S"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">BRANCH_NAME</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"${</span><span style="color:#E1E4E8">DATETIME</span><span style="color:#9ECBFF">}-feat-modern-tui-system"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Ensure on correct branch</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> checkout</span><span style="color:#9ECBFF"> 001-modern-tui-system</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Final local CI/CD validation</span></span>
<span class="line"><span style="color:#B392F0">./.runners-local/workflows/gh-workflow-local.sh</span><span style="color:#9ECBFF"> all</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Commit final changes</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> add</span><span style="color:#9ECBFF"> .</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> commit</span><span style="color:#79B8FF"> -m</span><span style="color:#9ECBFF"> "feat: Implement Modern TUI Installation System</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">- Add gum (Charm Bracelet) TUI framework with performance measured and logged startup</span></span>
<span class="line"><span style="color:#9ECBFF">- Implement adaptive box drawing (UTF-8/ASCII fallback) for all terminals</span></span>
<span class="line"><span style="color:#9ECBFF">- Add real verification tests (no hard-coded success messages)</span></span>
<span class="line"><span style="color:#9ECBFF">- Create modular lib/ architecture (core, ui, tasks, verification)</span></span>
<span class="line"><span style="color:#9ECBFF">- Implement Docker-like collapsible output (progressive summarization)</span></span>
<span class="line"><span style="color:#9ECBFF">- Integrate uv (Python) and fnm (Node.js) package managers</span></span>
<span class="line"><span style="color:#9ECBFF">- Add state management for resume capability</span></span>
<span class="line"><span style="color:#9ECBFF">- Implement parallel task execution (30-40% faster)</span></span>
<span class="line"><span style="color:#9ECBFF">- Comprehensive error handling with recovery suggestions</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">Performance:</span></span>
<span class="line"><span style="color:#9ECBFF">- Total installation: &#x3C;10 minutes (constitutional compliance)</span></span>
<span class="line"><span style="color:#9ECBFF">- fnm startup: performance measured and logged (constitutional requirement - AGENTS.md)</span></span>
<span class="line"><span style="color:#9ECBFF">- gum startup: performance measured and logged</span></span>
<span class="line"><span style="color:#9ECBFF">- Idempotent re-run: &#x3C;30 seconds</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">Constitutional Compliance: 10/10 principles</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle I: gum exclusive ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle II: Adaptive box drawing ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle III: Real verification tests ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle IV: Docker-like collapsible output ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle V: Modular lib/ architecture ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle VI: uv/fnm exclusive ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle VII: Structured logging ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle VIII: Error recovery ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle IX: Idempotency ✓</span></span>
<span class="line"><span style="color:#9ECBFF">- Principle X: Performance standards ✓</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">Refs: specs/001-modern-tui-system/spec.md</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">🤖 Generated with [Claude Code](https://claude.ai/code)</span></span>
<span class="line"><span style="color:#9ECBFF">Co-Authored-By: Claude &#x3C;noreply@anthropic.com>"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Push to remote</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> push</span><span style="color:#79B8FF"> -u</span><span style="color:#9ECBFF"> origin</span><span style="color:#9ECBFF"> 001-modern-tui-system</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Merge to main (branch preservation)</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> checkout</span><span style="color:#9ECBFF"> main</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> merge</span><span style="color:#9ECBFF"> 001-modern-tui-system</span><span style="color:#79B8FF"> --no-ff</span><span style="color:#79B8FF"> --no-edit</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> push</span><span style="color:#9ECBFF"> origin</span><span style="color:#9ECBFF"> main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># DO NOT DELETE BRANCH (constitutional requirement)</span></span>
<span class="line"><span style="color:#6A737D"># All branches preserved for historical reference</span></span></code></pre>
<p><strong>Post-Merge</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Verify GitHub Pages still works (docs/.nojekyll preserved)</li>
<li class="task-list-item"><input type="checkbox" disabled> Test installation on fresh Ubuntu 25.10 VM</li>
<li class="task-list-item"><input type="checkbox" disabled> Monitor for user-reported issues</li>
<li class="task-list-item"><input type="checkbox" disabled> Create conversation log in <code>documentations/development/conversation_logs/</code></li>
</ul>
<h2 id="risks--mitigation">Risks &#x26; Mitigation</h2>
<h3 id="risk-1-gum-installation-failure">Risk 1: gum Installation Failure</h3>
<p><strong>Impact</strong>: Medium (TUI features unavailable)
<strong>Probability</strong>: Low (gum has binary download + apt repo)
<strong>Mitigation</strong>: Graceful degradation to plain text output, install gum as first prerequisite task</p>
<h3 id="risk-2-terminal-compatibility-issues">Risk 2: Terminal Compatibility Issues</h3>
<p><strong>Impact</strong>: Medium (broken characters in some terminals)
<strong>Probability</strong>: Low (adaptive box drawing handles UTF-8/ASCII)
<strong>Mitigation</strong>: Automatic detection with manual override (<code>--box-style ascii</code>), comprehensive testing matrix</p>
<h3 id="risk-3-performance-regression">Risk 3: Performance Regression</h3>
<p><strong>Impact</strong>: High (fails constitutional requirements)
<strong>Probability</strong>: Low (benchmarks validated)
<strong>Mitigation</strong>: Performance tests in CI/CD, fnm performance measured and logged and gum performance measured and logged verified during installation</p>
<h3 id="risk-4-verification-false-positivesnegatives">Risk 4: Verification False Positives/Negatives</h3>
<p><strong>Impact</strong>: High (incorrect installation state reporting)
<strong>Probability</strong>: Medium (complex system state checking)
<strong>Mitigation</strong>: Comprehensive test suite, real system state validation, manual verification on first run</p>
<h3 id="risk-5-user-customization-loss">Risk 5: User Customization Loss</h3>
<p><strong>Impact</strong>: High (data loss, user frustration)
<strong>Probability</strong>: Low (idempotency design preserves customizations)
<strong>Mitigation</strong>: Backup critical files before modification, rollback capability, thorough testing</p>
<h3 id="risk-6-migration-complexity">Risk 6: Migration Complexity</h3>
<p><strong>Impact</strong>: Medium (users need to adapt to new system)
<strong>Probability</strong>: Medium (significant UX changes)
<strong>Mitigation</strong>: Preserve start-legacy.sh for rollback, comprehensive migration guide, user communication</p>
<h2 id="timeline-summary">Timeline Summary</h2>






































































<table><thead><tr><th>Phase</th><th>Duration</th><th>Key Deliverables</th></tr></thead><tbody><tr><td>Phase 0: Research</td><td>Completed</td><td>research.md with 7 research topics</td></tr><tr><td>Phase 1: Design</td><td>2-3 days</td><td>data-model.md, contracts/, quickstart.md</td></tr><tr><td>Phase 2: Implementation</td><td>4 weeks</td><td>All lib/ modules, refactored start.sh</td></tr><tr><td>- Wave 1: Core</td><td>Week 1</td><td>lib/core/*, lib/ui/tui.sh, gum installation</td></tr><tr><td>- Wave 2: Box Drawing</td><td>Week 1</td><td>lib/ui/boxes.sh, terminal detection</td></tr><tr><td>- Wave 3: Verification</td><td>Week 2</td><td>lib/verification/*, real system checks</td></tr><tr><td>- Wave 4: Tasks</td><td>Week 2-3</td><td>lib/tasks/*, 6 installation modules</td></tr><tr><td>- Wave 5: Collapsible</td><td>Week 3</td><td>lib/ui/collapsible.sh, progress.sh</td></tr><tr><td>- Wave 6: Orchestration</td><td>Week 4</td><td>New start.sh, task registry, parallel execution</td></tr><tr><td>Phase 3: Testing</td><td>1 week</td><td>Comprehensive test suite, validation</td></tr><tr><td>Phase 4: Documentation</td><td>2-3 days</td><td>README, ARCHITECTURE, migration guide</td></tr><tr><td><strong>Total</strong></td><td><strong>6-7 weeks</strong></td><td>Production-ready Modern TUI System</td></tr></tbody></table>
<p><strong>Estimated Effort</strong>: 80-100 hours total development time</p>
<h2 id="complexity-tracking">Complexity Tracking</h2>
<p><strong>No constitutional violations detected. No justification required.</strong></p>
<p>All requirements align with constitutional principles. No complexity budget overruns.</p> <div class="mt-12"> <div class="divider"></div> <div class="flex gap-2 flex-wrap"> <span class="badge badge-outline">developer</span><span class="badge badge-outline">technical</span> </div> </div> </article> </main> <!-- Modern Glass Footer --> <footer class="footer footer-center bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl text-gray-900 dark:text-gray-100 p-10 mt-16 border-t border-gray-200/50 dark:border-gray-700/50"> <aside> <p class="font-bold text-xl mb-2">
Ghostty Configuration Files
</p> <p class="max-w-2xl text-gray-600 dark:text-gray-400">
A comprehensive terminal environment setup featuring Ghostty terminal emulator<br>
with 2025 performance optimizations, AI tools integration, and intelligent update management.
</p> <p class="text-sm text-gray-600 dark:text-gray-400 mt-4">
Built with Astro v5 + Tailwind CSS v4 + DaisyUI v5
</p> </aside> </footer>  </body> </html>